/*!
*  filename: ej2-dropdowns.umd.min.js
*  version : 16.1.46
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-lists"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-buttons")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-data","@syncfusion/ej2-lists","@syncfusion/ej2-popups","@syncfusion/ej2-inputs","@syncfusion/ej2-buttons"],t):t(e.ej={},e.ej2Base,e.ej2Data,e.ej2Lists,e.ej2Popups,e.ej2Inputs,e.ej2Buttons)}(this,function(e,t,i,s,n,o,l){"use strict";function r(e,t,i,s){c+=String.fromCharCode(e),setTimeout(function(){c=""},1e3);var n;if(c=s?c.toLowerCase():c,d===c){for(var o=0;o<m.length;o++)if(m[o].classList.contains(f)){n=o;break}return n+=1,m[n]}var l=t,r=c.length,a=void 0;o=i=i?i+1:0;m=[];do{o===l.length&&(o=-1),a=l[n=-1===o?0:o],(s?a.innerText.toLowerCase():a.innerText).substr(0,r)===c&&m.push(l[n]),o++}while(o!==i);return d=c,m[0]}function a(e,t,i,s){var n=t;s=void 0===s||null===s||s;var o={item:null,index:null};if(e.length){for(var l=e.length,r=s?e.toLocaleLowerCase():e,a=0,h=n;a<h.length;a++){var p=h[a],u=(s?p.textContent.toLocaleLowerCase():p.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&u===r||"StartsWith"===i&&u.substr(0,l)===r)return o.item=p,o.index=a,{item:p,index:a}}return o}return o}function h(e,t,i,s){if(function(e){for(var t=e.querySelectorAll(".e-highlight"),i=t.length-1;i>=0;i--){var s=t[i].parentNode,n=document.createTextNode(t[i].textContent);s.replaceChild(n,t[i])}}(e),""!==t){var n=i?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");for(var o="StartsWith"===s?"^("+t+")":"EndsWith"===s?"("+t+")$":"("+t+")",l=new RegExp(o,n),r=e.querySelectorAll("ul li"),a=0;a<r.length;a++){var h=r[a];h.innerHTML=h.innerHTML.replace(l,'<span class="e-highlight">$1</span>')}}}function p(e,i,s,n,o,l,r){var a,h;a=t.createElement("span",{className:T}),h=t.createElement("label",{className:F}),t.isNullOrUndefined(s.id)||""===s.id||(h.id="label_"+s.id.replace(/ /g,"_"),t.attributes(s,{"aria-labelledby":h.id})),t.isNullOrUndefined(n.placeholder)||""===n.placeholder||(h.innerHTML=n.placeholder,n.removeAttribute("placeholder")),t.isNullOrUndefined(r)||""===r||(h.innerHTML=r),i.appendChild(a),i.appendChild(h),e.classList.add("e-float-input"),function(e,i){e&&e.length>0?(t.addClass([i],H),t.removeClass([i],W)):(t.removeClass([i],H),t.addClass([i],W))}(o,h),"Always"===l&&(h.classList.contains(W)&&t.removeClass([h],W),t.addClass([h],H))}function u(e,t,i){e&&e.length?t.placeholder="":t.placeholder=i}var c="",d="",m=[],f="e-active",v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),y=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},g=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return v(i,e),y([t.Property()],i.prototype,"text",void 0),y([t.Property()],i.prototype,"value",void 0),y([t.Property()],i.prototype,"iconCss",void 0),y([t.Property()],i.prototype,"groupBy",void 0),i}(t.ChildProperty),b={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:s.cssClass.li,group:s.cssClass.group,disabled:s.cssClass.disabled,grouping:"e-dd-group"},C=function(e){function n(t,i){return e.call(this,t,i)||this}return v(n,e),n.prototype.getPropObject=function(e,t,i){var s=new Object,n=new Object,o=new Function("prop","return prop");s[o(e)]=t[o(e)],n[o(e)]=i[o(e)];var l=new Object;return l.newProperty=s,l.oldProperty=n,l},n.prototype.getValueByText=function(e,i,s){var n=null;return t.isNullOrUndefined(this.listData)||(n=i?this.checkValueCase(e,!0,s):this.checkValueCase(e,!1,s)),n},n.prototype.checkValueCase=function(e,i,s,n){var o=this,l=null;n&&(l=e);var r=this.listData,a=this.fields,h=this.typeOfData(r).typeof;if("string"===h||"number"===h)for(var p=0,u=r;p<u.length;p++){var c=u[p];t.isNullOrUndefined(c)||(s?l=this.checkingAccent(String(c),e,i):i?this.checkIgnoreCase(String(c),e)&&(l=this.getItemValue(String(c),e,i)):this.checkNonIgnoreCase(String(c),e)&&(l=this.getItemValue(String(c),e,i,n)))}else i?r.filter(function(i){o.checkIgnoreCase(t.getValue(a.text,i).toString(),e)&&(l=t.getValue(a.value,i))}):n?r.filter(function(e){var i=t.getValue(a.value,e);t.isNullOrUndefined(i)||o.stringTrim(i)!==l.toString()||(l=t.getValue(a.text,e))}):r.filter(function(i){o.checkNonIgnoreCase(t.getValue(a.text,i),e)&&(l=t.getValue(a.value,i))});return l},n.prototype.checkingAccent=function(e,t,s){var n=i.DataUtil.ignoreDiacritics(String(e)),o=i.DataUtil.ignoreDiacritics(t.toString()),l=null;return s?this.checkIgnoreCase(n,o)&&(l=this.getItemValue(String(e),t,s)):this.checkNonIgnoreCase(String(e),t)&&(l=this.getItemValue(String(e),t,s)),l},n.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},n.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},n.prototype.getItemValue=function(e,t,i,s){var n=this.listData,o=this.typeOfData(n).typeof;return s?e.toString():i?"string"===o?String(e):this.getFormattedValue(String(e)):"string"===o?t:this.getFormattedValue(t)},n.prototype.l10nUpdate=function(e){if("No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var i=e?this.actionFailureTemplate:this.noRecordsTemplate;this.list.innerHTML="";for(var s=0,n=t.compile(i)({});s<n.length;s++){var o=n[s];this.list.appendChild(o)}}else{this.l10n=new t.L10n("dropdowns",{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale),this.list.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}},n.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},n.prototype.stringTrim=function(e){if(!t.isNullOrUndefined(e)){return e.toString().trim()}return e.toString()},n.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var i=this.typeOfData(this.listData);if("number"==typeof t.getValue(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseInt(e,10);var s=this.fields.value?this.fields.value:"value";if("boolean"==typeof t.getValue(s,i.item)||"boolean"===i.typeof)return"true"===e}return e},n.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?t.addClass(this.enableRtlElements,b.rtl):t.removeClass(this.enableRtlElements,b.rtl)},n.prototype.initialize=function(){if(this.bindEvent=!0,"UL"===this.element.tagName){var e=s.ListBase.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else if("SELECT"===this.element.tagName){(this.dataSource instanceof Array?this.dataSource.length>0:!t.isNullOrUndefined(this.dataSource))||this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query)},n.prototype.getPersistData=function(){return this.addOnPersist([])},n.prototype.setEnabled=function(){this.enabled?this.element.setAttribute("aria-disabled","false"):this.element.setAttribute("aria-disabled","true")},n.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),n=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,n,t),s.length){for(var o=0;o<s.length;o++){var l=s[o],r={};r[t.text]=l.label,r.isHeader=!0;var a=l.querySelectorAll("option");i.push(r),this.getJSONfromOption(i,a,t)}e.querySelectorAll("select>option")}this.fields.text=t.text,this.fields.value=t.value,this.resetList(i,t)},n.prototype.getJSONfromOption=function(e,t,i){for(var s=0,n=t;s<n.length;s++){var o=n[s],l={};l[i.text]=o.innerText,l[i.value]=o.getAttribute(i.value)?o.getAttribute(i.value):o.innerText,e.push(l)}},n.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1},n.prototype.setListData=function(e,t,s){var n=this;t=t||this.fields;var o;if(this.isActive=!0,e instanceof i.DataManager){var l={cancel:!1,data:e,query:s};if(this.trigger("actionBegin",l),l.cancel)return;this.showSpinner(),this.isRequested=!0,l.data.executeQuery(this.getQuery(l.query)).then(function(e){if(n.trigger("actionComplete",e),!e.cancel){var i=e.result;o=n.renderItems(i,t),n.onActionComplete(o,i,e),n.isRequested=!1,n.hideSpinner(),n.trigger("dataBound",{items:i,e:e})}}).catch(function(e){n.isRequested=!1,n.onActionFailure(e),n.hideSpinner()})}else{this.showSpinner();var r=new i.DataManager(e),a=this.getQuery(s).executeLocal(r);o=this.renderItems(a,t),this.onActionComplete(o,a),this.hideSpinner(),this.trigger("dataBound",{items:a})}},n.prototype.showSpinner=function(){},n.prototype.hideSpinner=function(){},n.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),t.addClass([this.list],b.noData)},n.prototype.onActionComplete=function(e,t,i){this.listData=t,this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+b.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},n.prototype.postRender=function(e,i,s){var n=e.querySelector("."+b.li),o=e.querySelector("."+b.selected);n&&!o&&t.addClass([n],b.focus),i.length<=0?(this.l10nUpdate(),t.addClass([e],b.noData)):e.classList.remove(b.noData),this.groupTemplate&&this.renderGroupTemplate(e)},n.prototype.getQuery=function(e){return e||(this.query?this.query:new i.Query)},n.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+b.group)){var t=this.dataSource,i=e.querySelectorAll("."+b.group);s.ListBase.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,i)}},n.prototype.createListItems=function(e,i){e&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=s.ListBase.groupDataSource(e,i.properties,this.sortOrder)),t.addClass([this.list],b.grouping)):e=this.getSortedDataSource(e);var n=this.listOption(e,i);return s.ListBase.createList(e,n,!0)},n.prototype.listOption=function(e,i){var s=!t.isNullOrUndefined(i.iconCss),n=null!==i.text||null!==i.value?{fields:i.properties,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return t.extend({},n,i,!0)},n.prototype.setFloatingHeader=function(e){t.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=t.createElement("div",{className:b.fixedHead}),this.list.querySelector("li").classList.contains(b.group)||(this.fixedHeaderElement.style.display="none"),t.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),t.isNullOrUndefined(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)},n.prototype.scrollStop=function(e){for(var i=e.target,s=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),n=Math.round(i.scrollTop/s),o=this.ulElement.querySelectorAll("li"),l=n;l>-1;l--){if(!t.isNullOrUndefined(o[l])&&o[l].classList.contains(b.group)){var r=o[l];this.fixedHeaderElement.innerHTML=r.innerHTML,this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none"}},n.prototype.renderItems=function(e,t){var i;if(this.itemTemplate&&e){var n=e;n=n&&t.groupBy?s.ListBase.groupDataSource(n,t.properties,this.sortOrder):this.getSortedDataSource(n),i=this.templateListItem(n,t)}else i=this.createListItems(e,t);return i},n.prototype.templateListItem=function(e,t){var i=this.listOption(e,t);return s.ListBase.renderContentTemplate(this.itemTemplate,e,t.properties,i)},n.prototype.typeOfData=function(e){for(var i={typeof:null,item:null},s=0;!t.isNullOrUndefined(e)&&s<e.length;s++)if(!t.isNullOrUndefined(e[s]))return i={typeof:typeof e[s],item:e[s]};return i},n.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=this.liCollections[0].offsetWidth;this.fixedHeaderElement.style.width=e.toString()+"px",t.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+b.group);this.fixedHeaderElement.innerHTML=i.innerHTML},n.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";e=s.ListBase.getDataSource(e,s.ListBase.addSorting(this.sortOrder,t))}return e},n.prototype.getIndexByValue=function(e){for(var i,s=this.getItems(),n=0;n<s.length;n++)if(!t.isNullOrUndefined(e)&&s[n].getAttribute("data-value")===e.toString()){i=n;break}return i},n.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)},n.prototype.setFields=function(){var e=this.fields;this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!e.value&&e.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")},n.prototype.resetList=function(e,t,i){this.list&&this.setListData(e,t,i)},n.prototype.updateSelection=function(){},n.prototype.renderList=function(){this.render()},n.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},n.prototype.setUpdateInitial=function(e,i){t.isNullOrUndefined(i.fields)||this.setFields();for(var s=0;e.length>s;s++)i[e[s]]&&this.updateDataSource(e[s])},n.prototype.onPropertyChanged=function(e,i){this.setUpdateInitial(["query","sortOrder","dataSource","itemTemplate"],e);for(var s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":this.renderGroupTemplate(this.list);break;case"locale":this.list&&!t.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}},n.prototype.render=function(e){this.list=t.createElement("div",{className:b.content,attrs:{tabindex:"0"}}),this.list.classList.add(b.root),this.setFields();var i={duration:300,selector:"."+b.li};this.rippleFun=t.rippleEffect(this.list,i);var s=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&t.isNullOrUndefined(s)||t.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),t.removeClass([this.element],b.root),this.element.style.display="none";var n=document.createElement("div");this.element.parentElement.insertBefore(n,this.element),n.appendChild(this.element),n.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()},n.prototype.getModuleName=function(){return"dropdownbase"},n.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+b.li)},n.prototype.addItem=function(e,i){this.list&&this.list.textContent!==this.noRecordsTemplate||this.renderList();var s=this.getItems().length,n=this.list.querySelector("."+b.selected);e=e instanceof Array?e:[e];var o;o=t.isNullOrUndefined(i)||i<0||i>s-1?s:i;for(var l=this.fields,r=[],a=0;a<e.length;a++){var h=e[a],p=t.createElement("li",{className:b.li,id:"option-add-"+a});p.setAttribute("data-value",t.getValue(l.value,h)),p.setAttribute("role","option"),p.appendChild(document.createTextNode(t.getValue(l.text,h))),r.push(p),this.listData.push(h),this.updateActionCompleteData(p,h)}if(0===s&&t.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.appendChild(this.ulElement),t.append(r,this.ulElement);else for(a=0;a<e.length;a++){this.liCollections[o]?this.liCollections[o].parentNode.insertBefore(r[a],this.liCollections[o]):this.ulElement.appendChild(r[a]);var u=[].slice.call(this.liCollections);u.splice(o,0,r[a]),this.liCollections=u,o+=1}(n||0===i)&&this.updateSelection()},n.prototype.setZIndex=function(){},n.prototype.updateActionCompleteData=function(e,t){},n.prototype.getDataByValue=function(e){if(!t.isNullOrUndefined(this.listData)){var i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i)for(var s=0,n=this.listData;s<n.length;s++){var o=n[s];if(!t.isNullOrUndefined(o)&&o===e)return o}else for(var l=0,r=this.listData;l<r.length;l++){o=r[l];if(!t.isNullOrUndefined(o)&&t.getValue(this.fields.value?this.fields.value:"value",o)===e)return o}}return null},n.prototype.destroy=function(){document.body.contains(this.list)&&(t.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),t.isNullOrUndefined(this.rippleFun)||this.rippleFun(),t.detach(this.list)),e.prototype.destroy.call(this)},y([t.Complex({text:null,value:null,iconCss:null,groupBy:null},g)],n.prototype,"fields",void 0),y([t.Property(!1)],n.prototype,"enableRtl",void 0),y([t.Property(!1)],n.prototype,"enablePersistence",void 0),y([t.Property(null)],n.prototype,"itemTemplate",void 0),y([t.Property(null)],n.prototype,"groupTemplate",void 0),y([t.Property("No Records Found")],n.prototype,"noRecordsTemplate",void 0),y([t.Property("The Request Failed")],n.prototype,"actionFailureTemplate",void 0),y([t.Property("None")],n.prototype,"sortOrder",void 0),y([t.Property(!0)],n.prototype,"enabled",void 0),y([t.Property([])],n.prototype,"dataSource",void 0),y([t.Property(null)],n.prototype,"query",void 0),y([t.Property(1e3)],n.prototype,"zIndex",void 0),y([t.Property(!1)],n.prototype,"ignoreAccent",void 0),y([t.Event()],n.prototype,"actionBegin",void 0),y([t.Event()],n.prototype,"actionComplete",void 0),y([t.Event()],n.prototype,"actionFailure",void 0),y([t.Event()],n.prototype,"select",void 0),y([t.Event()],n.prototype,"dataBound",void 0),y([t.Event()],n.prototype,"created",void 0),y([t.Event()],n.prototype,"destroyed",void 0),n=y([t.NotifyPropertyChanges],n)}(t.Component),E=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),S=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},x={root:"e-dropdownlist",hover:b.hover,selected:b.selected,rtl:b.rtl,li:b.li,disable:b.disabled,base:b.root,focus:b.focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},I={container:null,buttons:[]},w=function(e){function s(t,i){var s=e.call(this,t,i)||this;return s.previousValue=null,s}return E(s,e),s.prototype.preRender=function(){this.element.style.opacity="0",this.initializeData(),e.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},s.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},s.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},s.prototype.renderList=function(t){e.prototype.render.call(this,t),this.wireListEvents()},s.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?t.classList(e,["e-label-top"],["e-label-bottom"]):t.classList(e,["e-label-bottom"],["e-label-top"])}},s.prototype.resetHandler=function(e){e.preventDefault(),this.clear(e),this.onChangeEvent(e)},s.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()){var e=this.ulElement.querySelector("."+x.li);e&&e.classList.add(x.focus)}},s.prototype.clear=function(e,t,i){this.resetSelection(i);var s=this.getItemData();this.previousValue!==s.value&&this.onChangeEvent(e)},s.prototype.resetSelection=function(e){this.list&&(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()),this.hiddenElement.innerHTML="",this.inputElement.value="",e||(this.value=null,this.itemData=null),this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(t.detach(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState()},s.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i)this.inputWrapper.container.classList.add(this.htmlAttributes[i]);else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.enabled=!1,this.setEnable();else if("readonly"===i&&"readonly"===this.htmlAttributes[i])this.readonly=!0,this.dataBind();else if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[i]);else{["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","id","placeholder"].indexOf(i)>-1?"placeholder"===i?o.Input.setPlaceholder(this.htmlAttributes[i],this.inputElement):this.element.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}}},s.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}},s.prototype.setEnableRtl=function(){o.Input.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},s.prototype.setEnable=function(){o.Input.setEnabled(this.enabled,this.inputElement),this.enabled?(t.removeClass([this.inputWrapper.container],x.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),t.addClass([this.inputWrapper.container],x.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},s.prototype.getPersistData=function(){return this.addOnPersist(["value"])},s.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},s.prototype.targetElement=function(){return this.inputWrapper.container},s.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},s.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},s.prototype.getElementByValue=function(e){for(var t,i=0,s=this.getItems();i<s.length;i++){var n=s[i];if(this.getFormattedValue(n.getAttribute("data-value"))===e){t=n;break}}return t},s.prototype.initValue=function(){this.renderList(),this.dataSource instanceof i.DataManager?this.initRemoteRender=!0:this.updateValues()},s.prototype.updateValues=function(){if(t.isNullOrUndefined(this.value))if(this.text&&t.isNullOrUndefined(this.value)){var e=this.getElementByText(this.text);if(t.isNullOrUndefined(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),o.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},s.prototype.onBlur=function(e){var i=e.relatedTarget,s=e.target,n=this.isPreventBlur;this.isPreventBlur=!1,!n||this.isDocumentClick||!this.isPopupOpen||t.isNullOrUndefined(s)&&(this.isFilterLayout()||!t.isNullOrUndefined(i))?this.isDocumentClick||!t.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(x.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&s.classList.contains(x.inputFocus))||t.isNullOrUndefined(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&s!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()},s.prototype.focusOutAction=function(){this.isInteracted=!1,this.focusOut(),this.onFocusOut()},s.prototype.onFocusOut=function(){this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.inputWrapper.clearButton&&t.addClass([this.inputWrapper.clearButton],x.clearIconHide),this.trigger("blur")},s.prototype.onFocus=function(){this.isInteracted||(this.isInteracted=!0,this.trigger("focus")),this.updateIconState()},s.prototype.wireEvent=function(){t.EventHandler.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),t.EventHandler.add(this.inputWrapper.container,"focus",this.focusIn,this),t.EventHandler.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},s.prototype.bindCommonEvent=function(){t.EventHandler.add(this.targetElement(),"blur",this.onBlur,this),t.Browser.isDevice||(this.keyboardModule=new t.KeyboardEvents(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})),this.bindClearEvent()},s.prototype.bindClearEvent=function(){this.showClearButton&&t.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},s.prototype.unBindCommonEvent=function(){t.EventHandler.remove(this.targetElement(),"blur",this.onBlur),t.Browser.isDevice||this.keyboardModule.destroy(),this.showClearButton&&t.EventHandler.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},s.prototype.updateIconState=function(){this.showClearButton&&(""!==this.inputElement.value?t.removeClass([this.inputWrapper.clearButton],x.clearIconHide):t.addClass([this.inputWrapper.clearButton],x.clearIconHide))},s.prototype.wireListEvents=function(){t.EventHandler.add(this.list,"click",this.onMouseClick,this),t.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),t.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},s.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.isRequested||t.isNullOrUndefined(this.list.querySelector("li"))||this.incrementalSearch(e))},s.prototype.onMouseClick=function(e){var i=e.target,s=(i.classList,t.closest(i,"."+b.li));if(this.isValidLI(s))if(this.setSelection(s,e),t.Browser.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100)}},s.prototype.onMouseOver=function(e){var i=t.closest(e.target,"."+b.li);this.setHover(i)},s.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(b.hover)&&(this.removeHover(),t.addClass([e],b.hover))},s.prototype.onMouseLeave=function(e){this.removeHover()},s.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+b.hover);e&&e.length&&t.removeClass(e,b.hover)},s.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},s.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var i=r(e.charCode,this.liCollections,this.activeIndex,!0);t.isNullOrUndefined(i)||(this.setSelection(i,e),this.setScrollPosition())}},s.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(n.hideSpinner(this.spinnerElement),t.removeClass([this.spinnerElement],x.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},s.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement=t.Browser.isDevice&&!t.isNullOrUndefined(this.filterInputObj)&&this.filterInputObj.buttons[1]||!t.isNullOrUndefined(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],t.addClass([this.spinnerElement],x.disableIcon),n.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"}),n.showSpinner(this.spinnerElement))},s.prototype.keyActionHandler=function(e){var i="pageUp"===e.action||"pageDown"===e.action,s="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var n="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||i||s)||this.isPopupOpen)&&!this.readonly){var o="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||o||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),t.isNullOrUndefined(this.list)||!t.isNullOrUndefined(this.liCollections)&&n&&0===this.liCollections.length||this.isRequested)return;switch((o&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!n&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":var l=this.list.querySelector("."+x.focus);if(this.isSelectFocusItem(l))this.setSelection(l,e);else{var r=void 0,a="down"===e.action?this.activeIndex+1:this.activeIndex-1,h=0;"autocomplete"===this.getModuleName()&&(h="down"===e.action&&t.isNullOrUndefined(this.activeIndex)?0:this.liCollections.length-1,a=a<0?this.liCollections.length-1:a===this.liCollections.length?0:a),r=t.isNullOrUndefined(this.activeIndex)?this.liCollections[h]:this.liCollections[a],this.setSelection(r,e)}e.preventDefault();break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":if("dropdownlist"===this.getModuleName()){if(e.preventDefault(),0===this.activeIndex)return;this.setSelection(this.liCollections[0],e)}break;case"end":if("dropdownlist"===this.getModuleName()){e.preventDefault();var p=this.getItems().length-1;if(this.activeIndex===p)return;this.setSelection(this.liCollections[p],e)}break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"escape":case"tab":case"close":this.isPopupOpen&&(this.hidePopup(),this.focusDropDown(e))}}},s.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+x.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()},s.prototype.isSelectFocusItem=function(e){return!t.isNullOrUndefined(e)},s.prototype.getPageCount=function(){var e=this.list.classList.contains(b.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},s.prototype.pageUpSelection=function(e,t){var i=e>=0?this.liCollections[e+1]:this.liCollections[0];this.setSelection(i,t)},s.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(s,t)},s.prototype.unWireEvent=function(){t.EventHandler.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),t.EventHandler.remove(this.inputWrapper.container,"keypress",this.onSearch),t.EventHandler.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},s.prototype.unWireListEvents=function(){t.EventHandler.remove(this.list,"click",this.onMouseClick),t.EventHandler.remove(this.list,"mouseover",this.onMouseOver),t.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},s.prototype.onDocumentClick=function(e){var i=e.target;if(!t.isNullOrUndefined(this.popupObj)&&t.closest(i,"#"+this.popupObj.element.id)||this.inputWrapper.container.contains(e.target))i===this.inputElement||this.allowFiltering&&i===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&t.Browser.isDevice&&i===this.inputWrapper.buttons[0]||(this.isPreventBlur=(t.Browser.isIE||"edge"===t.Browser.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(x.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var s=this.isRequested;this.isInteracted=!1,this.hidePopup(),s||(this.onFocusOut(),this.inputWrapper.container.classList.remove(x.inputFocus))}},s.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(x.inputFocus))},s.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn()},s.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(x.disable)&&this.inputWrapper.clearButton!==e.target){var t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),!this.readonly){this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());var i=this;this.isSecondClick||setTimeout(function(){i.cloneElements()},100)}}},s.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e,this.isSecondClick=!0)}},s.prototype.updateSelectedItem=function(e,i,s){this.removeSelection(),e.classList.add(b.selected),this.removeHover();var n=this.getFormattedValue(e.getAttribute("data-value"));if(this.item=e,this.itemData=this.getDataByValue(n),!this.initial&&!s){this.isSelected=!0;var o={e:i,item:this.item,itemData:this.itemData,isInteracted:!!i,cancel:!1};if(this.trigger("select",o),o.cancel)return}var l=this.list.querySelector("."+b.focus);l&&t.removeClass([l],b.focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(n)},s.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(b.selected)&&(this.removeSelection(),e.classList.add(b.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},s.prototype.setValue=function(e){var t=this.getItemData();return null===t.value?o.Input.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):o.Input.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},s.prototype.setSelection=function(e,i){this.isValidLI(e)&&!e.classList.contains(b.selected)&&this.updateSelectedItem(e,i,!1),this.list&&this.removeHover(),this.selectedLI=e,this.setValue(i)||(this.valueTemplate&&null!==this.itemData?this.setValueTemplate():this.inputElement.previousSibling===this.valueTempElement&&(t.detach(this.valueTempElement),this.inputElement.style.display="block"),this.isPopupOpen&&(t.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&t.attributes(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!t.isNullOrUndefined(e)||this.isPopupOpen&&!t.isNullOrUndefined(i)&&("keydown"!==i.type||"keydown"===i.type&&"enter"===i.action))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),!this.isPopupOpen||t.isNullOrUndefined(this.selectedLI)||null===this.itemData||i&&"click"===i.type||this.setScrollPosition(i))},s.prototype.setValueTemplate=function(){this.valueTempElement||(this.valueTempElement=t.createElement("span",{className:x.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";for(var e=0,i=t.compile(this.valueTemplate)(this.itemData);e<i.length;e++){var s=i[e];this.valueTempElement.appendChild(s)}},s.prototype.removeSelection=function(){var e=this.list.querySelectorAll("."+b.selected);e.length&&(t.removeClass(e,b.selected),e[0].removeAttribute("aria-selected"))},s.prototype.getItemData=function(){var e=this.fields,i={};i=this.itemData;var s,n;t.isNullOrUndefined(i)||(s=t.getValue(e.value,i),n=t.getValue(e.text,i));return{value:t.isNullOrUndefined(i)||t.isUndefined(s)?i:s,text:t.isNullOrUndefined(i)||t.isUndefined(s)?i:n}},s.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({value:t.value,index:i,text:t.text},!0),this.detachChangeEvent(e)},s.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=t.isNullOrUndefined(this.text)?"":this.text,!this.initial){this.setHiddenValue();var i={e:e,item:this.item,itemData:this.itemData,isInteracted:!!e,value:this.value};this.trigger("change",i)}},s.prototype.setHiddenValue=function(){if(t.isNullOrUndefined(this.value))this.hiddenElement.innerHTML="";else{this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>";this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString())}},s.prototype.onFilterUp=function(e){if(this.isValidKey=40===e.keyCode||38===e.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},s.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},s.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},s.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},s.prototype.searchLists=function(e){var s=this;if(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+x.clearIcon)){this.filterInput.parentElement.querySelector("."+x.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"}if(this.isFiltering()){var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,i){n.cancel||(s.isCustomFilter=!0,s.filteringAction(e,t,i))},baseEventArgs:e,cancel:!1};if(this.trigger("filtering",n),n.cancel)return;if(!this.isCustomFilter&&!n.preventDefaultAction){var o=this.query?this.query.clone():new i.Query,l=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof i.DataManager||"string"!==l)&&"number"!==l){var r=this.fields;o.where(t.isNullOrUndefined(r.text)?"":r.text,"startswith",this.filterInput.value,!0,this.ignoreAccent)}else o.where("","startswith",this.filterInput.value,!0,this.ignoreAccent);this.filteringAction(this.dataSource,o,this.fields)}}},s.prototype.filteringAction=function(e,i,s){t.isNullOrUndefined(this.filterInput)||(this.beforePopupOpen=!0,""===this.filterInput.value.trim()?(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,t.isNullOrUndefined(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0):(this.isNotSearchList=!1,this.resetList(e,s,i)))},s.prototype.setSearchBox=function(e){if(this.isFiltering()){var i=t.createElement("span",{className:x.filterParent});this.filterInput=t.createElement("input",{attrs:{type:"text"},className:x.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var s=!1;return t.Browser.isDevice&&(s=!0),this.filterInputObj=o.Input.createInput({element:this.filterInput,buttons:s?[x.backIcon,x.filterBarClearIcon]:[x.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}}),t.append([this.filterInputObj.container],i),t.prepend([i],e),t.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+x.clearIcon),!t.Browser.isDevice&&this.clearIconElement&&(t.EventHandler.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),t.Browser.isDevice||(this.searchKeyModule=new t.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})),t.EventHandler.add(this.filterInput,"input",this.onInput,this),t.EventHandler.add(this.filterInput,"keyup",this.onFilterUp,this),t.EventHandler.add(this.filterInput,"keydown",this.onFilterDown,this),t.EventHandler.add(this.filterInput,"blur",this.onBlur,this),this.filterInputObj}return I},s.prototype.onInput=function(){this.isValidKey=!0},s.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},s.prototype.onActionComplete=function(i,s,n,o){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;e.prototype.onActionComplete.call(this,i,s,n),this.isRequested&&!t.isNullOrUndefined(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!t.isNullOrUndefined(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,t.isNullOrUndefined(i)||t.attributes(i,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1),"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&(this.actionCompleteData.isUpdated||(this.actionCompleteData={ulElement:i.cloneNode(!0),list:s,isUpdated:!0}),this.addNewItem(s,l),t.isNullOrUndefined(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},s.prototype.addNewItem=function(e,i){var s=this;if(!t.isNullOrUndefined(this.itemData)&&!t.isNullOrUndefined(i)){var n=this.getItemData().value;e.some(function(e){return("string"==typeof e||"number"==typeof e)&&e===n||t.getValue(s.fields.value,e)===n})||this.addItem(this.itemData)}},s.prototype.updateActionCompleteData=function(e,t){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.actionCompleteData.list.push(t))},s.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.list.querySelector('[data-value="'+e+'"]');this.selectedLI=t,this.activeItem(t),this.removeFocus()},s.prototype.updateSelection=function(){var e=this.list.querySelector("."+b.selected);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+b.li).classList.add(x.focus))},s.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+x.focus);e&&e.length&&t.removeClass(e,x.focus)},s.prototype.renderPopup=function(){if(this.popupObj&&document.body.contains(this.popupObj.element))this.refreshPopup();else{var e=t.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup"}),i=this.setSearchBox(e);if(this.listHeight=t.formatUnit(this.popupHeight),this.headerTemplate){this.header=document.createElement("div"),t.addClass([this.header],x.header);for(var s=0,n=t.compile(this.headerTemplate)({});s<n.length;s++){var o=n[s];this.header.appendChild(o)}t.append([this.header],e)}if(t.append([this.list],e),this.footerTemplate&&this.setFooterTemplate(e),document.body.appendChild(e),e.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,t.isNullOrUndefined(i.container)||(this.searchBoxHeight=i.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){var l=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(l+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){l=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(l+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",e.style.maxHeight=t.formatUnit(this.popupHeight)}else e.style.height="auto";var r,a=0;if(!t.isNullOrUndefined(this.selectedLI)&&!t.isNullOrUndefined(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,t.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){a=this.getOffsetValue(e);var h=this.isEmptyList()?this.list:this.liCollections[0];r=-(parseInt(getComputedStyle(h).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(e,a,r),this.checkCollision(e),t.Browser.isDevice&&(this.popupObj.element.classList.add(x.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(x.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),t.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),t.addClass([document.body,this.popupObj.element],x.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=i.container.querySelector(".e-back-icon"),this.clearIconElement=i.container.querySelector("."+x.clearIcon),t.EventHandler.add(this.backIconElement,"click",this.clickOnBackIcon,this),t.EventHandler.add(this.clearIconElement,"click",this.clearText,this))),e.style.visibility="visible",t.addClass([e],"e-popup-close");for(var p=0,u=this.popupObj.getScrollableParent(this.inputWrapper.container);p<u.length;p++){var c=u[p];t.EventHandler.add(c,"scroll",this.scrollHandler,this)}t.Browser.isDevice&&this.isFilterLayout()&&t.EventHandler.add(this.list,"scroll",this.listScroll,this),t.attributes(this.targetElement(),{"aria-expanded":"true"});var d=this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container;t.addClass([d],[x.inputFocus]);this.beforePopupOpen=!0;var m={popup:this.popupObj,cancel:!1};this.trigger("open",m),m.cancel||(t.addClass([this.inputWrapper.container],[x.iconAnimation]),this.popupObj.show(new t.Animation({name:"FadeIn",duration:100})))}},s.prototype.checkCollision=function(e){if(!t.Browser.isDevice||t.Browser.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick){n.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px")}},s.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTop,10),s=parseInt(t.borderBottom,10);return this.setPopupPosition(i+s)},s.prototype.createPopup=function(e,i,s){var o=this;this.popupObj=new n.Popup(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:s,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){o.isDocumentClick||o.focusDropDown(),o.isDocumentClick=!1,o.destroyPopup()},open:function(){t.EventHandler.add(document,"mousedown",o.onDocumentClick,o),o.isPopupOpen=!0,o.isFilterLayout()&&(t.removeClass([o.inputWrapper.container],[x.inputFocus]),o.isFilterFocus=!0,o.filterInput.focus(),o.inputWrapper.clearButton&&t.addClass([o.inputWrapper.clearButton],x.clearIconHide)),o.activeStateChange()}})},s.prototype.isEmptyList=function(){return!t.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},s.prototype.getFocusElement=function(){},s.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},s.prototype.scrollHandler=function(){t.Browser.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup(),this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement.style.zIndex="0",this.fixedHeaderElement.style.display="none")},s.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+x.clearIcon);t.detach(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},s.prototype.setPopupPosition=function(e){var i,s=e,n=this.list.querySelector("."+x.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],l=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=o.getBoundingClientRect().height,a=this.list.offsetHeight/2,h=t.isNullOrUndefined(n)?o.offsetTop:n.offsetTop;if(l.offsetTop-a<h&&!t.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!t.isNullOrUndefined(n)){var p=this.list.offsetHeight/r,u=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(p-(this.liCollections.length-this.activeIndex))*r-s+u,this.list.scrollTop=n.offsetTop}else h>a?(i=a-r/2,this.list.scrollTop=h-a+r/2):i=h;return-(i=i+r+s-(r-this.inputWrapper.container.offsetHeight)/2)},s.prototype.setWidth=function(){var e=t.formatUnit(this.popupWidth);if(e.indexOf("%")>-1){e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"}if(t.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var i=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(i).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},s.prototype.scrollBottom=function(e){var i=this.list.offsetHeight,s=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+s-i;n=e?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===this.activeIndex?this.list.scrollTop=0:(s>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=n)},s.prototype.scrollTop=function(){var e=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;e=this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!t.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},s.prototype.isEditTextBox=function(){return!1},s.prototype.isFiltering=function(){return this.allowFiltering},s.prototype.isPopupButton=function(){return!0},s.prototype.setScrollPosition=function(e){if(t.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},s.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},s.prototype.listScroll=function(){this.filterInput.blur()},s.prototype.closePopup=function(e){if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){t.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var i=0,s=this.popupObj.getScrollableParent(this.inputWrapper.container);i<s.length;i++){var n=s[i];t.EventHandler.remove(n,"scroll",this.scrollHandler)}t.Browser.isDevice&&this.isFilterLayout()&&(t.removeClass([document.body,this.popupObj.element],x.popupFullScreen),t.EventHandler.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(t.Browser.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&t.EventHandler.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(t.EventHandler.remove(this.backIconElement,"click",this.clickOnBackIcon),t.EventHandler.remove(this.clearIconElement,"click",this.clearText)),t.EventHandler.remove(this.filterInput,"input",this.onInput),t.EventHandler.remove(this.filterInput,"keyup",this.onFilterUp),t.EventHandler.remove(this.filterInput,"keydown",this.onFilterDown),t.EventHandler.remove(this.filterInput,"blur",this.onBlur),this.filterInput=null),t.attributes(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(x.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var o={popup:this.popupObj,cancel:!1};if(this.trigger("close",o),!o.cancel){var l={name:"FadeOut",duration:100,delay:e||0};"autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new t.Animation(l)):this.destroyPopup()}}},s.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),t.detach(this.popupObj.element)},s.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},s.prototype.render=function(){"INPUT"===this.element.tagName?this.inputElement=this.element:(this.inputElement=t.createElement("input"),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement)),this.inputWrapper=o.Input.createInput({element:this.inputElement,buttons:this.isPopupButton()?[x.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:this.cssClass,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}}),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement);var e=this.element.getAttribute("name")?this.element.getAttribute("name"):this.element.getAttribute("id");this.hiddenElement=t.createElement("select",{attrs:{name:e,"aria-hidden":"true",tabindex:"-1",class:x.hiddenElement}}),t.prepend([this.hiddenElement],this.inputWrapper.container),this.element.removeAttribute("name"),this.setFields(),this.inputWrapper.container.style.width=t.formatUnit(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):t.getUniqueID("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),t.attributes(this.targetElement(),this.getAriaAttributes()),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var s=this.element;this.value=s.options[s.selectedIndex].value,this.text=t.isNullOrUndefined(this.value)?null:s.options[s.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn()},s.prototype.setFooterTemplate=function(e){this.footer?this.footer.innerHTML="":(this.footer=document.createElement("div"),t.addClass([this.footer],x.footer));for(var i=0,s=t.compile(this.footerTemplate)({});i<s.length;i++){var n=s[i];this.footer.appendChild(n)}t.append([this.footer],e)},s.prototype.setOldText=function(e){this.text=e},s.prototype.setOldValue=function(e){this.value=e},s.prototype.refreshPopup=function(){t.isNullOrUndefined(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||t.Browser.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||this.popupObj.refreshPosition(this.inputWrapper.container)},s.prototype.updateDataSource=function(e){this.clear(null,e,!0),this.resetList(this.dataSource),this.itemData=this.getDataByValue(this.value);var t=this.getItemData();this.setProperties({value:t.value,text:t.text})},s.prototype.onPropertyChanged=function(s,n){this.setUpdateInitial(["query","dataSource"],s);for(var l=0,r=Object.keys(s);l<r.length;l++){var a=r[l];switch(a){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":t.setStyleAttribute(this.inputWrapper.container,{width:t.formatUnit(s.width)});break;case"placeholder":o.Input.setPlaceholder(s.placeholder,this.inputElement);break;case"filterBarPlaceholder":o.Input.setPlaceholder(s.filterBarPlaceholder,this.filterInput);break;case"readonly":o.Input.setReadonly(s.readonly,this.inputElement);break;case"cssClass":o.Input.setCssClass(s.cssClass,[this.inputWrapper.container]),this.popupObj&&this.popupObj.element.classList.add(s.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===s.text)return void this.clear();if(this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var h=this.getElementByText(s.text);this.isValidLI(h)?this.setSelection(h,null):this.setOldText(n.text)}break;case"value":if(null===s.value)return void this.clear();if(this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var p=this.getElementByValue(s.value);this.isValidLI(p)?this.setSelection(p,null):this.setOldValue(n.value)}break;case"index":if(null===s.index)return void this.clear();if(this.list||(this.dataSource instanceof i.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var u=this.liCollections[s.index];this.isValidLI(u)?this.setSelection(u,null):this.index=n.index}break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"floatLabelType":o.Input.removeFloating(this.inputWrapper),o.Input.addFloating(this.inputElement,s.floatLabelType,this.placeholder);break;case"showClearButton":o.Input.setClearButton(s.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;default:var c=void 0;c=this.getPropObject(a,s,n),e.prototype.onPropertyChanged.call(this,c.newProperty,c.oldProperty)}}},s.prototype.getModuleName=function(){return"dropdownlist"},s.prototype.showPopup=function(){if(this.beforePopupOpen)this.refreshPopup();else{if(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(t.isNullOrUndefined(this.list)||!t.isUndefined(this.list)&&this.list.classList.contains(b.noData))&&this.renderList(),t.Browser.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}t.isNullOrUndefined(this.list.children[0])&&!this.list.classList.contains(b.noData)||this.renderPopup(),t.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}},s.prototype.hidePopup=function(){this.isEscapeKey&&"dropdownlist"===this.getModuleName()&&(o.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,t.isNullOrUndefined(this.index)?this.resetSelection():(this.selectedLI=this.liCollections[this.index],this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())),this.closePopup();var e=this.getItemData();""!==this.inputElement.value.trim()||this.isInteracted||!this.isSelectCustom&&(t.isNullOrUndefined(this.selectedLI)||this.inputElement.value===e.text)||(this.isSelectCustom=!1,this.clear())},s.prototype.focusIn=function(){if(!this.targetElement().classList.contains(x.disable)){var e=!1;this.preventFocus&&t.Browser.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,e=!0),e||this.targetElement().focus(),t.addClass([this.inputWrapper.container],[x.inputFocus]),this.onFocus()}},s.prototype.focusOut=function(){this.isTyped=!0,this.hidePopup(),this.targetElement().blur(),t.removeClass([this.inputWrapper.container],[x.inputFocus])},s.prototype.destroy=function(){var i=this;this.isActive=!1,this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),["readonly","aria-disabled","aria-placeholder","placeholder"].forEach(function(e){i.inputElement.removeAttribute(e)}),this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),o.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?t.detach(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),t.detach(this.inputWrapper.container)),e.prototype.destroy.call(this)},S([t.Property(null)],s.prototype,"cssClass",void 0),S([t.Property("100%")],s.prototype,"width",void 0),S([t.Property("300px")],s.prototype,"popupHeight",void 0),S([t.Property("100%")],s.prototype,"popupWidth",void 0),S([t.Property(null)],s.prototype,"placeholder",void 0),S([t.Property(null)],s.prototype,"filterBarPlaceholder",void 0),S([t.Property({})],s.prototype,"htmlAttributes",void 0),S([t.Property(null)],s.prototype,"query",void 0),S([t.Property(null)],s.prototype,"valueTemplate",void 0),S([t.Property(null)],s.prototype,"headerTemplate",void 0),S([t.Property(null)],s.prototype,"footerTemplate",void 0),S([t.Property(!1)],s.prototype,"allowFiltering",void 0),S([t.Property(!1)],s.prototype,"readonly",void 0),S([t.Property(null)],s.prototype,"text",void 0),S([t.Property(null)],s.prototype,"value",void 0),S([t.Property(null)],s.prototype,"index",void 0),S([t.Property("Never")],s.prototype,"floatLabelType",void 0),S([t.Property(!1)],s.prototype,"showClearButton",void 0),S([t.Event()],s.prototype,"filtering",void 0),S([t.Event()],s.prototype,"change",void 0),S([t.Event()],s.prototype,"open",void 0),S([t.Event()],s.prototype,"close",void 0),S([t.Event()],s.prototype,"blur",void 0),S([t.Event()],s.prototype,"focus",void 0),s=S([t.NotifyPropertyChanges],s)}(C),O=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),A=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l};x.root="e-combobox";var k={container:null,buttons:[]},L=function(e){function i(t,i){return e.call(this,t,i)||this}return O(i,e),i.prototype.preRender=function(){e.prototype.preRender.call(this)},i.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(t.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),t.EventHandler.add(this.inputWrapper.container,"blur",this.onBlur,this)),t.isNullOrUndefined(this.inputWrapper.buttons[0])||t.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),t.EventHandler.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(t.EventHandler.add(this.inputElement,"input",this.onInput,this),t.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),t.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this)),this.bindCommonEvent()},i.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(x.input)||!t.Browser.isDevice)&&t.Browser.isDevice||e.preventDefault()},i.prototype.targetElement=function(){return this.inputElement},i.prototype.setOldText=function(e){o.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},i.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},i.prototype.valueMuteChange=function(e){var i=t.isNullOrUndefined(e)?null:e.toString();o.Input.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var s=this.fields,n={};n[s.text]=t.isNullOrUndefined(e)?null:e.toString(),n[s.value]=t.isNullOrUndefined(e)?null:e.toString(),this.itemData=n,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},i.prototype.updateValues=function(){if(t.isNullOrUndefined(this.value))if(this.text&&t.isNullOrUndefined(this.value)){(e=this.getElementByText(this.text))?this.setSelection(e,null):(o.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e;(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null)}this.setHiddenValue(),o.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},i.prototype.getAriaAttributes=function(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},i.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+x.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+x.li)),this.incrementalSearch(t))},i.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},i.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:k},i.prototype.onActionComplete=function(t,i,s,n){e.prototype.onActionComplete.call(this,t,i,s),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&this.inlineSearch()},i.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),i=this.list.querySelector("."+x.selected);if(e.text===this.inputElement.value&&!t.isNullOrUndefined(i))return i;if((t.Browser.isDevice&&!this.isDropDownClick||!t.Browser.isDevice)&&!t.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0){var s=a(this.inputElement.value,this.liCollections,"StartsWith",!0).item;if(t.isNullOrUndefined(s))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var n=this.getIndexByValue(s.getAttribute("data-value"))-1,o=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(o)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var l=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=n*o+l,t.addClass([s],x.focus)}}return s}return null},i.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},i.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement=this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,t.addClass([this.spinnerElement],x.disableIcon),n.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"}),n.showSpinner(this.spinnerElement))},i.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(n.hideSpinner(this.spinnerElement),this.spinnerElement.innerHTML="",t.removeClass([this.spinnerElement],x.disableIcon),this.spinnerElement=null)},i.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},i.prototype.isAndroidAutoFill=function(e){if(t.Browser.isAndroid){var i=this.getSelectionPoints(),s=this.prevSelectPoints.end,n=i.end,o=this.prevSelectPoints.start,l=i.start;return 0!==s&&(s===e.length&&o===e.length||o>l&&s>n||s===n&&o===l)}return!1},i.prototype.isSelectFocusItem=function(e){return!t.isNullOrUndefined(e)},i.prototype.inlineSearch=function(e){var i=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),s=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(t.isNullOrUndefined(s))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var n=this.list.querySelector("."+x.li);this.setHoverList(n)}else this.activeIndex=null,this.removeSelection(),this.removeFocus();else{if(!i){var o=this.getFormattedValue(s.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(o),this.activeIndex=t.isNullOrUndefined(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(s,i)}},i.prototype.incrementalSearch=function(e){this.showPopup(),t.isNullOrUndefined(this.listData)||(this.inlineSearch(e),e.preventDefault())},i.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var s=i+e.substr(i.length,e.length);o.Input.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else o.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},i.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},i.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(t.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),t.EventHandler.remove(this.inputWrapper.container,"blur",this.onBlur)),t.isNullOrUndefined(this.inputWrapper.buttons[0])||t.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),t.EventHandler.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(t.EventHandler.remove(this.inputElement,"input",this.onInput),t.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),t.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)),this.unBindCommonEvent()},i.prototype.setSelection=function(i,s){e.prototype.setSelection.call(this,i,s),t.isNullOrUndefined(i)||this.autofill||this.isDropDownClick||this.removeFocus()},i.prototype.selectCurrentItem=function(e){var i;this.isPopupOpen&&((i=this.list.querySelector("."+x.focus))&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clear(e):this.isTyped&&!this.isSelected&&t.isNullOrUndefined(i)&&this.customValue(),this.hidePopup()},i.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(x.selected)&&(this.removeFocus(),e.classList.add(x.focus))},i.prototype.targetFocus=function(e){t.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus()},i.prototype.dropDownClick=function(i){i.preventDefault(),t.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,i)},i.prototype.customValue=function(){var e=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var i=this.value;if(t.isNullOrUndefined(e)){var s=""===this.inputElement.value?null:this.inputElement.value,n=this.fields,l=void 0;l={text:s,item:{}},this.initial||this.trigger("customValueSpecifier",l);var r=l.item,a={};r&&t.getValue(n.text,r)&&t.getValue(n.value,r)?a=r:(t.setValue(n.text,s,a),t.setValue(n.value,s,a)),this.itemData=a;var h={text:t.getValue(n.text,this.itemData),value:t.getValue(n.value,this.itemData),index:null};this.setProperties(h,!0),this.setSelection(null,null),this.isSelectCustom=!0}else this.isSelectCustom=!1,this.setProperties({value:e});i!==this.value&&this.onChangeEvent(null)}else this.allowCustom&&(this.isSelectCustom=!0);else this.setProperties({value:e}),t.isNullOrUndefined(this.value)&&o.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)},i.prototype.onPropertyChanged=function(i,s){this.setUpdateInitial(["query","dataSource"],i);for(var n=0,l=Object.keys(i);n<l.length;n++){var r=l[n];switch(r){case"readonly":o.Input.setReadonly(this.readonly,this.inputElement),this.readonly?(t.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),t.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)):(t.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),t.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this));break;case"allowFiltering":this.setSearchBox();break;case"allowCustom":break;default:var a=void 0;a=this.getPropObject(r,i,s),e.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},i.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&t.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this)},i.prototype.getModuleName=function(){return"combobox"},i.prototype.hidePopup=function(){var i=""===this.inputElement.value?null:this.inputElement.value;if(!t.isNullOrUndefined(this.listData)){var s=this.isEscapeKey;this.isEscapeKey&&(o.Input.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var n=this.isSelectCustom?{text:""}:this.getItemData(),l=this.list.querySelector("."+x.selected);if(n.text===this.inputElement.value&&!t.isNullOrUndefined(l))return this.isSelected&&(this.onChangeEvent(null),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var r=a(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=r.item,t.isNullOrUndefined(r.index)&&(r.index=a(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=r.index,t.isNullOrUndefined(this.selectedLI)?s&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue()}t.isNullOrUndefined(this.listData)&&this.allowCustom&&!t.isNullOrUndefined(i)&&i!==this.value&&this.customValue(),e.prototype.hidePopup.call(this)},i.prototype.focusIn=function(){t.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.focusIn.call(this)},A([t.Property(!1)],i.prototype,"autofill",void 0),A([t.Property(!0)],i.prototype,"allowCustom",void 0),A([t.Property({})],i.prototype,"htmlAttributes",void 0),A([t.Property(!1)],i.prototype,"allowFiltering",void 0),A([t.Property(null)],i.prototype,"query",void 0),A([t.Property(null)],i.prototype,"index",void 0),A([t.Property(!0)],i.prototype,"showClearButton",void 0),A([t.Event()],i.prototype,"customValueSpecifier",void 0),A([t.Event()],i.prototype,"filtering",void 0),A([t.Property(null)],i.prototype,"valueTemplate",void 0),A([t.Property("Never")],i.prototype,"floatLabelType",void 0),A([t.Property(null)],i.prototype,"filterBarPlaceholder",void 0),i=A([t.NotifyPropertyChanges],i)}(w),B=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),P=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},D="e-atc-spinner-icon";x.root="e-autocomplete",x.icon="e-input-group-icon e-ddl-icon e-search-icon";var N=function(e){function s(t,i){var s=e.call(this,t,i)||this;return s.isFiltered=!1,s}return B(s,e),s.prototype.preRender=function(){e.prototype.preRender.call(this)},s.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},s.prototype.getQuery=function(e){var s=e?e.clone():this.query?this.query.clone():new i.Query,n=""!==this.queryString||t.isNullOrUndefined(this.value)?this.filterType:"equal",o=""!==this.queryString||t.isNullOrUndefined(this.value)?this.queryString:this.value;if(this.isFiltered)return s;if(null!==this.queryString){var l=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof i.DataManager||"string"!==l)&&"number"!==l){var r=t.isNullOrUndefined(this.fields.value)?"":this.fields.value;s.where(r,n,o,this.ignoreCase,this.ignoreAccent)}else s.where("",n,o,this.ignoreCase,this.ignoreAccent)}return t.isNullOrUndefined(this.suggestionCount)||s.take(this.suggestionCount),s},s.prototype.searchLists=function(i){var s=this;this.isTyped=!0,this.isSelectCustom=!1,t.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this,!0);var n=40===i.keyCode||38===i.keyCode;if(this.queryString=this.filterInput.value,n)return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var o={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,i){o.cancel||(s.isFiltered=!0,s.filterAction(e,t,i))},cancel:!1};this.trigger("filtering",o),o.cancel||this.isFiltered||o.preventDefaultAction||this.filterAction(this.dataSource,null,this.fields)},s.prototype.filterAction=function(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&(this.queryString.length>=this.minLength||this.isFiltered)?this.resetList(e,i,t):this.hidePopup()},s.prototype.clear=function(i,s){(t.isNullOrUndefined(s)||"dataSource"!==s)&&e.prototype.clear.call(this,i),this.beforePopupOpen&&this.hidePopup()},s.prototype.onActionComplete=function(i,s,n,o){this.fixedHeaderElement=null,e.prototype.onActionComplete.call(this,i,s,n);var l=this.list.querySelector("."+x.li);t.isNullOrUndefined(l)||t.removeClass([l],x.focus),this.postBackAction()},s.prototype.postBackAction=function(){if(null!==this.queryString&&""!==this.queryString&&this.highlight&&h(this.list,this.queryString,this.ignoreCase,this.filterType),this.autofill&&!t.isNullOrUndefined(this.liCollections[0])){var i=[this.liCollections[0]],s=a(this.inputElement.value,i,"StartsWith",this.ignoreCase);t.isNullOrUndefined(s.item)||e.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},s.prototype.setSelection=function(i,s){if(this.isValidLI(i))if(!t.isNullOrUndefined(s)&&"keydown"===s.type&&"enter"!==s.action&&this.isValidLI(i)){var n=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.setHoverList(i),this.selectedLI=i,this.setScrollPosition(s),this.autofill&&(this.preventAutoFill=!1,e.prototype.setAutoFill.call(this,i)),t.attributes(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else e.prototype.setSelection.call(this,i,s)},s.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement=this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||o.Input.appendSpan("e-input-group-icon "+D,this.inputWrapper.container),t.addClass([this.spinnerElement],x.disableIcon),n.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"}),n.showSpinner(this.spinnerElement))},s.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(n.hideSpinner(this.spinnerElement),t.removeClass([this.spinnerElement],x.disableIcon),this.spinnerElement.classList.contains(D)?t.detach(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},s.prototype.isFiltering=function(){return!0},s.prototype.renderPopup=function(){this.list.scrollTop=0,e.prototype.renderPopup.call(this),this.highlight&&h(this.list,this.queryString,this.ignoreCase,this.filterType)},s.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},s.prototype.isPopupButton=function(){return this.showPopupButton},s.prototype.isSelectFocusItem=function(e){return!1},s.prototype.showPopup=function(){this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.preventAutoFill=!0,t.isNullOrUndefined(this.list)?this.renderList():this.resetList(this.dataSource,this.fields))},s.prototype.hidePopup=function(){e.prototype.hidePopup.call(this),this.activeIndex=-1},s.prototype.onPropertyChanged=function(i,s){this.setUpdateInitial(["query","dataSource"],i);for(var n=0,l=Object.keys(i);n<l.length;n++){var r=l[n];switch(r){case"showPopupButton":if(this.showPopupButton){var a=o.Input.appendSpan(x.icon,this.inputWrapper.container);this.inputWrapper.buttons[0]=a,t.EventHandler.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else t.detach(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:var h=void 0;h=this.getPropObject(r,i,s),e.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}}},s.prototype.getModuleName=function(){return"autocomplete"},s.prototype.render=function(){e.prototype.render.call(this)},P([t.Complex({value:null,iconCss:null,groupBy:null},g)],s.prototype,"fields",void 0),P([t.Property(!0)],s.prototype,"ignoreCase",void 0),P([t.Property(!1)],s.prototype,"showPopupButton",void 0),P([t.Property(!1)],s.prototype,"highlight",void 0),P([t.Property(20)],s.prototype,"suggestionCount",void 0),P([t.Property({})],s.prototype,"htmlAttributes",void 0),P([t.Property(null)],s.prototype,"query",void 0),P([t.Property(1)],s.prototype,"minLength",void 0),P([t.Property("Contains")],s.prototype,"filterType",void 0),P([t.Event()],s.prototype,"filtering",void 0),P([t.Property(null)],s.prototype,"index",void 0),P([t.Property("Never")],s.prototype,"floatLabelType",void 0),P([t.Property(null)],s.prototype,"valueTemplate",void 0),P([t.Property(null)],s.prototype,"filterBarPlaceholder",void 0),P([t.Property(!1)],s.prototype,"allowFiltering",void 0),P([t.Property(null)],s.prototype,"text",void 0),s=P([t.NotifyPropertyChanges],s)}(L),T="e-float-line",F="e-float-text",H="e-label-top",W="e-label-bottom",U=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),V=function(e,t,i,s){var n,o=arguments.length,l=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},q="e-input-focus",j="e-hide-listitem",M="e-chips",R="e-chips-close",_="e-chip-selected",K="e-zero-size",z="e-chips-close e-close-hooker",Q="e-close-icon-hide",J="e-ddl-disable-icon",X="e-ms-spinner-icon",Y=function(e){function s(t,i){var s=e.call(this,t,i)||this;return s.mobFilter=!0,s.isFiltered=!1,s.focused=!0,s.isValidKey=!1,s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return U(s,e),s.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},s.prototype.requiredModules=function(){var e=[];return"CheckBox"===this.mode&&(this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,this.allowFiltering=!0,e.push({member:"CheckBoxSelection",args:[this]})),e},s.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":this.overAllWrapper.classList.add(this.htmlAttributes[i]),this.popupWrapper.classList.add(this.htmlAttributes[i]);break;case"disabled":this.enable(!1);break;case"placeholder":this.inputElement.setAttribute(i,this.htmlAttributes[i]);break;default:["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):this.overAllWrapper.setAttribute(i,this.htmlAttributes[i])}}},s.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},s.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(Q)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(Q))},s.prototype.updateCssClass=function(){this.cssClass&&(this.popupWrapper.classList.add(this.cssClass),this.overAllWrapper.classList.add(this.cssClass))},s.prototype.onPopupShown=function(){if(t.Browser.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}var i={popup:this.popupObj,cancel:!1};if(this.trigger("open",i),!i.cancel){if(this.focusAtFirstListItem(),document.body.appendChild(this.popupObj.element),this.refreshPopup(),"CheckBox"===this.mode&&t.addClass([this.overAllWrapper],["e-icon-anim"]),this.popupObj.show({name:"FadeIn",duration:100}),t.attributes(this.inputElement,{"aria-expanded":"true"}),!this.isFirstClick){var s=this.list.querySelector("ul");s&&(this.mainList=s.cloneNode?s.cloneNode(!0):s),this.isFirstClick=!0}this.refreshListItems(null),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}},s.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+b.li)){var e=void 0;null!==(e="CheckBox"===this.mode?this.list.querySelector("li."+b.li+":not(."+j+")"):this.ulElement.querySelector("li."+b.li+":not(."+j+")"))&&(this.removeFocus(),this.addListFocus(e))}},s.prototype.focusAtLastListItem=function(e){var t;e?t=a(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?a(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))},s.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}},s.prototype.updateListARIA=function(){t.attributes(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),t.attributes(this.inputElement,this.getAriaAttributes());var e,i=(e=this.list.querySelectorAll("li."+b.li)).length;if(e&&e.length)for(;i>0;)"true"!==e[i-1].getAttribute("aria-selected")&&e[i-1].setAttribute("aria-selected","false"),i--},s.prototype.removelastSelection=function(e){var i,s=(i=this.chipCollectionWrapper.querySelectorAll("span."+M))[i.length-1].getAttribute("data-value");if(t.isNullOrUndefined(this.value)||(this.tempValues=this.value.slice()),this.removeValue(s,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar),this.makeTextBoxEmpty(),this.allowFiltering&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData),this.refreshSelection()}this.focusAtLastListItem(s)},s.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.renderPopup(),this.onPopupShown()},s.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},s.prototype.onActionComplete=function(i,s,n,o){e.prototype.onActionComplete.call(this,i,s,n),"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?t.isNullOrUndefined(this.mainData)||0!==this.mainData.length||(this.mainData=s):(this.mainList=i.cloneNode?i.cloneNode(!0):i,this.mainData=s,this.mainListCollection=this.liCollections),(this.remoteCustomValue||s.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),t.isNullOrUndefined(this.setInitialValue)||this.setInitialValue(),t.isNullOrUndefined(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),this.updateValueState(null,this.value,null)),this.renderPopup(),this.refreshPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))},s.prototype.refreshSelection=function(){var e,i,s=this.hideSelectedItem?j:b.selected;if(!t.isNullOrUndefined(this.value))for(var n=0;this.value[n];n++)if(e=this.value[n],i=this.ulElement.querySelector('li[data-value="'+e+'"]')){if(t.addClass([i],s),this.hideSelectedItem&&i.previousSibling&&i.previousElementSibling.classList.contains(b.group)&&(!i.nextElementSibling||i.nextElementSibling.classList.contains(b.group))&&t.addClass([i.previousElementSibling],s),this.hideSelectedItem&&i.classList.contains(b.focus)){t.removeClass([i],b.focus);var o=i.parentElement.querySelectorAll("."+b.li+":not(."+j+")");o.length>0?t.addClass([o[0]],b.focus):(this.l10nUpdate(),t.addClass([this.list],b.noData))}if(i.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&i.classList.contains("e-active")){var l=i.firstElementChild.getAttribute("aria-checked");if(t.isNullOrUndefined(l)||"false"===l){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:i,e:null};this.notify("updatelist",r)}}}this.checkSelectAll(),this.checkMaxSelection()},s.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li."+b.li).length,t=this.list.querySelectorAll("li."+b.selected).length;e===t&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),e!==t&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})},s.prototype.openClick=function(e){this.openOnClick||(""!==this.targetElement()?this.showPopup():this.hidePopup())},s.prototype.KeyUp=function(e){var t=this;if(this.isValidKey=8===e.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,this.expandTextbox(),e.keyCode){default:if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&8!==e.keyCode)this.focusAtFirstListItem();else{var s=this.targetElement();if(this.keyCode=e.keyCode,this.allowFiltering){var n={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,s){n.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,s))},event:e,cancel:!1};if(this.trigger("filtering",n),n.cancel)return;this.isFiltered||n.preventDefaultAction||(this.filterAction=!0,this.dataUpdater(this.dataSource,null,this.fields))}else{if(this.allowCustomValue){var o=new i.Query;o=""!==s?o.where(this.fields.text,"startswith",s,!0,this.ignoreAccent):o,this.dataUpdater(this.mainData,o,this.fields);break}var l=void 0;l=this.list.querySelectorAll("li."+b.li+":not(.e-hide-listitem)");var r=a(this.targetElement(),l,"StartsWith",this.ignoreCase);r&&null!==r.item?(this.addListFocus(r.item),this.list.scrollTop=r.item.getBoundingClientRect().height*r.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}}},s.prototype.getQuery=function(e){var s=e?e.clone():this.query?this.query.clone():new i.Query;if(this.filterAction){if(null!==this.targetElement()){var n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof i.DataManager||"string"!==n)&&"number"!==n){var o=this.fields;s.where(t.isNullOrUndefined(o.text)?"":o.text,"startswith",this.targetElement(),!0,this.ignoreAccent)}else s.where("","startswith",this.targetElement(),!0,this.ignoreAccent)}return s}if(this.dataSource instanceof i.DataManager&&!t.isNullOrUndefined(this.value)&&!this.remoteFilterAction){for(var l=void 0,r=t.isNullOrUndefined(this.fields.value)?this.fields.text:this.fields.value,a=0;a<this.value.length;a++)l=0===a?new i.Predicate(r,"equal",this.value[a]):l.or(r,"equal",this.value[a]);return(new i.Query).where(l)}return e||(this.query?this.query:new i.Query)},s.prototype.dataUpdater=function(e,t,s){if(""===this.targetElement().trim()){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(n,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}else this.resetList(e,s,t),this.allowCustomValue&&(e instanceof i.DataManager?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,s));this.refreshPopup()},s.prototype.checkForCustomValue=function(e,i){var s=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&s){var n=this.fields.text,o=this.fields.value,l={},r=!t.isNullOrUndefined(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if("string"!=typeof r){for(var a=Object.keys(r),h=0;h<a.length;h++)l[a[h]]="";l[o]=l[n]=this.inputElement.value;(p=JSON.parse(JSON.stringify(this.listData))).splice(0,0,l),this.resetList(p,i||this.fields,e)}else{var p=[this.inputElement.value];this.resetList(p,i||this.fields)}}this.value&&this.value.length&&this.refreshSelection()},s.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},s.prototype.wrapperClick=function(e){this.setDynValue=!1,!this.readonly&&this.enabled&&(e.target!==this.overAllClear?(this.inputFocus||"CheckBox"===this.mode||this.inputElement.focus(),"CheckBox"===this.mode&&this.focusIn(),e.target&&-1!==e.target.classList.toString().indexOf(R)?this.isPopupOpen()&&this.refreshPopup():(!this.isPopupOpen()&&this.openOnClick?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus()),e.preventDefault())):e.preventDefault())},s.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),t.attributes(this.inputElement,{"aria-disabled":"false"})):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),t.attributes(this.inputElement,{"aria-disabled":"true"})),this.enabled!==e&&(this.enabled=e),this.hidePopup()},s.prototype.onBlur=function(e){var i=!t.isNullOrUndefined(e)&&e.relatedTarget;if(document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode&&this.inputElement.focus();else{if("CheckBox"===this.mode&&t.Browser.isIE&&!t.isNullOrUndefined(e))return this.inputFocus=!1,void this.overAllWrapper.classList.remove(q);if(this.scrollFocusStatus)return e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove(q),"Box"!==this.mode&&"CheckBox"!==this.mode&&(this.refreshListItems(null),this.updateDelimView()),this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change"),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,t.Browser.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(e,i,s,n,o){e.classList.remove("e-input-focus");var l=i.querySelector("."+F);s&&s.length<=0&&"Auto"===n&&!t.isNullOrUndefined(l)&&(l.classList.contains(H)&&t.removeClass([l],H),t.addClass([l],W))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder()}},s.prototype.refreshInputHight=function(){this.value&&this.value.length?this.searchWrapper.classList.add(K):this.searchWrapper.classList.remove(K)},s.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},s.prototype.updateValueState=function(e,t,i){var s=t||[],n=i||[];if(this.validateValues(s,n)){var o={e:e,oldValue:i,value:t,isInteracted:!!e};this.trigger("change",o)}},s.prototype.getPagingCount=function(){var e=this.list.classList.contains(b.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},s.prototype.pageUpSelection=function(e){var t,i=this.list.querySelectorAll("li."+b.li+":not(.e-reorder-hide)");t="CheckBox"===this.mode?e>=0?i[e+1]:i[0]:e>=0?this.liCollections[e+1]:this.liCollections[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},s.prototype.pageDownSelection=function(e){var t,i=this.getItems(),s=this.list.querySelectorAll("li."+b.li+":not(.e-reorder-hide)");t="CheckBox"===this.mode?e<=s.length?s[e-1]:s[s.length-1]:e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},s.prototype.focusIn=function(){return!(!this.enabled||this.readonly)&&(this.inputFocus=!0,this.value?this.tempValues=this.value.slice():this.tempValues=this.value,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(K),this.focused&&(this.inputElement.focus(),this.trigger("focus"),this.focused=!1),this.overAllWrapper.classList.contains(q)||this.overAllWrapper.classList.add(q),function(e,i){e.classList.add("e-input-focus");var s=i.querySelector("."+F);t.isNullOrUndefined(s)||(t.addClass([s],H),s.classList.contains(W)&&t.removeClass([s],W))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0)},s.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},s.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},s.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},s.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},s.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),t.Browser.isIE||this.popupObj.show())},s.prototype.checkTextLength=function(){return this.targetElement().length<1},s.prototype.popupKeyActions=function(e){switch(e){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus();break;case 40:this.isPopupOpen()||this.showPopup()}},s.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+b.focus);t.isNullOrUndefined(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)},s.prototype.onKeyDown=function(e){if(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124)){if(e.altKey)return this.popupKeyActions(e.keyCode),void e.preventDefault();if(this.isPopupOpen()){var t=this.list.querySelector("."+b.focus);switch(e.keyCode){case 36:case 35:break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:e.preventDefault(),this.moveByList(-1),this.updateAriaAttribute();break;case 40:e.preventDefault(),this.moveByList(1),this.updateAriaAttribute();break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),void("CheckBox"!==this.mode&&this.selectByKey(e));case 32:return void("CheckBox"===this.mode&&(e.preventDefault(),this.selectByKey(e)))}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}if(this.checkTextLength())if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1);break;case 39:e.preventDefault(),this.moveBy(1);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var i=this.value[this.value.length-1];this.removeValue(i,e),this.updateDelimeter(this.delimiterChar),this.focusAtLastListItem(i)}this.expandTextbox(),this.refreshPopup()}},s.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},s.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&(this.value=e,this.initialValueUpdate(),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},s.prototype.scrollBottom=function(e,i){var s=this.list.getBoundingClientRect().height,n=e.offsetTop+e.getBoundingClientRect().height-this.list.scrollTop,o=this.list.scrollTop+n-s,l=e.offsetTop+e.getBoundingClientRect().height-this.list.scrollTop;l=this.fields.groupBy&&!t.isUndefined(this.fixedHeaderElement)?l-this.fixedHeaderElement.getBoundingClientRect().height:l,0===i?this.list.scrollTop=0:n>s?this.list.scrollTop=o:l>0&&this.list.getBoundingClientRect().height>l||(this.list.scrollTop=o)},s.prototype.scrollTop=function(e,i){var s=e.offsetTop-this.list.scrollTop;e.offsetTop,e.getBoundingClientRect().height,this.list.scrollTop;s=this.fields.groupBy&&!t.isUndefined(this.fixedHeaderElement)?s-this.fixedHeaderElement.getBoundingClientRect().height:s;var n=e.offsetTop+e.getBoundingClientRect().height-this.list.scrollTop;0===i?this.list.scrollTop=0:s<0?this.list.scrollTop=this.list.scrollTop+s:n>0&&this.list.getBoundingClientRect().height>n||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!t.isUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.getBoundingClientRect().height:0))},s.prototype.selectListByKey=function(e){var t=this.list.querySelector("li."+b.focus),i=this.value&&this.value.length?this.value.length:0;null!==t&&(t.classList.contains("e-active")&&(i-=1),this.isValidLI(t)&&i<this.maximumSelectionLength&&(this.updateListSelection(t,e),this.addListFocus(t),"CheckBox"===this.mode?(this.updateDelimView(),this.refreshInputHight(),this.updateDelimeter(this.delimiterChar)):this.updateDelimeter(this.delimiterChar),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(t.textContent),this.refreshPopup(),this.value&&this.value.length&&(this.removeListSelection(),this.refreshSelection())),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()},s.prototype.refreshListItems=function(e){if((this.allowFiltering||this.allowCustomValue)&&this.mainList&&this.listData){var t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},s.prototype.removeSelectedChip=function(e){var i,s=this.chipCollectionWrapper.querySelector("span."+_);null!==s&&(t.isNullOrUndefined(this.value)||(this.tempValues=this.value.slice()),null!==(i=s.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(i)),this.removeValue(s.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup()},s.prototype.moveByTop=function(e){var t,i=this.list.querySelectorAll("li."+b.li);i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()},s.prototype.moveByList=function(e){if(this.list){var t=this.list.querySelectorAll("li."+b.li+":not(."+j+"):not(.e-reorder-hide)"),i=this.list.querySelector("li."+b.focus),s=-1;if(t.length){for(var n=0;n<t.length;n++)if(t[n]===i){s=n;break}e>0?s<t.length-1&&(this.removeFocus(),this.addListFocus(t[++s]),this.scrollBottom(t[s],s)):s>0&&(this.removeFocus(),this.addListFocus(t[--s]),this.scrollTop(t[s],s))}}},s.prototype.moveBy=function(e){var t,i,s;t=this.chipCollectionWrapper.querySelectorAll("span."+M),null===(i=this.chipCollectionWrapper.querySelector("span."+_))?e<0&&this.addChipSelection(t[t.length-1]):e<0?null!==(s=i.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(s)):(s=i.nextElementSibling,this.removeChipSelection(),null!==s&&this.addChipSelection(s))},s.prototype.chipClick=function(e){if(this.enabled){var i=t.closest(e.target,"."+M);this.removeChipSelection(),this.addChipSelection(i),this.trigger("chipSelection",e)}},s.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},s.prototype.addChipSelection=function(e){t.addClass([e],_)},s.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var t=e.target.parentElement,i=this.getFormattedValue(t.getAttribute("data-value"));this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(i,e),this.updateDelimeter(this.delimiterChar),this.makeTextBoxEmpty(),e.preventDefault()}},s.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},s.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length?this.inputElement.placeholder="":this.inputElement.placeholder=this.placeholder:this.setFloatLabelType(),this.expandTextbox()},s.prototype.removeValue=function(e,i){var s=this.value.indexOf(this.getFormattedValue(e)),n=this.hideSelectedItem?j:b.selected;if(-1!==s){var o=this.list.querySelector('li[data-value="'+e+'"]'),l={e:i,item:o,itemData:this.getDataByValue(e),isInteracted:!!i,cancel:!1};if(this.trigger("removing",l),l.cancel)return;this.value.splice(s,1),this.setProperties({value:[].concat([],this.value)},!0),null!==o&&(o.setAttribute("aria-selected","false"),t.removeClass([o],n),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:o,e:this,index:s}),this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:o,e:i}),t.attributes(this.inputElement,{"aria-activedescendant":o.id}),this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})),this.updateMainList(!0,e),this.removeChip(e),this.updateChipStatus();if((this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength){var r=this.list.querySelectorAll("li."+b.li+":not(.e-active)");t.removeClass(r,"e-disable")}this.trigger("removed",l)}},s.prototype.updateMainList=function(e,i){if(this.allowFiltering){var s=this.mainList.querySelector('li[data-value="'+i+'"]');s&&(e?(s.setAttribute("aria-selected","false"),t.removeClass([s],this.hideSelectedItem?j:b.selected),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","false"),t.removeClass([s.firstElementChild.lastElementChild],"e-check"))):(s.setAttribute("aria-selected","true"),t.addClass([s],this.hideSelectedItem?j:b.selected),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","true"),t.addClass([s.firstElementChild.lastElementChild],"e-check"))))}},s.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var i=this.chipCollectionWrapper.querySelector('span[data-value="'+e+'"]');i&&t.remove(i)}},s.prototype.updateChipStatus=function(){this.value.length?(t.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(t.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),t.isNullOrUndefined(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},s.prototype.addValue=function(e,t,i){this.value||(this.value=[]),this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.list.querySelector('li[data-value="'+e+'"]');this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.updateChipStatus(),this.checkMaxSelection()},s.prototype.checkMaxSelection=function(){if((this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength){var e=this.list.querySelectorAll("li."+b.li+":not(.e-active)");t.addClass(e,"e-disable")}},s.prototype.dispatchSelect=function(e,t,i,s){if(this.initStatus&&!s){var n={e:t,item:i,itemData:this.getDataByValue(e),isInteracted:!!t,cancel:!1};if(this.trigger("select",n),n.cancel)return!0}return!1},s.prototype.addChip=function(e,t,i){if(this.chipCollectionWrapper){var s=this.getChip(e,t,i);if(s.cancel)return;this.chipCollectionWrapper.appendChild(s.element)}},s.prototype.removeChipFocus=function(){var e,i;if(e=this.chipCollectionWrapper.querySelectorAll("span."+M),i=this.chipCollectionWrapper.querySelectorAll("span."+R.split(" ")[0]),t.removeClass(e,_),t.Browser.isDevice)for(var s=0;s<i.length;s++)i[s].style.display="none"},s.prototype.onMobileChipInteraction=function(e){var i=t.closest(e.target,"."+M),s=i.querySelector("span."+R.split(" ")[0]);this.enabled&&!this.readonly&&(i.classList.contains(_)||(this.removeChipFocus(),s.style.display="",i.classList.add(_)),this.refreshPopup(),e.preventDefault())},s.prototype.getChip=function(e,i,s){var n={text:i,value:i},o=t.createElement("span",{className:M,attrs:{"data-value":i,title:e}}),l=t.createElement("span",{className:"e-chipcontent"}),r=t.createElement("span",{className:R});if(this.mainData&&(n=this.getDataByValue(i)),this.valueTemplate&&n)for(var a=0,h=t.compile(this.valueTemplate)(n);a<h.length;a++){var p=h[a];l.appendChild(p)}else l.innerHTML=e;o.appendChild(l);var u={isInteracted:!!s,itemData:n,e:s,setClass:function(e){t.addClass([o],e)},cancel:!1};return this.trigger("tagging",u),u.cancel?{cancel:!0,element:o}:(t.Browser.isDevice?(o.classList.add("e-mob-chip"),t.append([r],o),r.style.display="none",t.EventHandler.add(o,"click",this.onMobileChipInteraction,this)):(t.EventHandler.add(o,"mousedown",this.chipClick,this),this.showClearButton&&o.appendChild(r)),t.EventHandler.add(r,"mousedown",this.onChipRemove,this),{cancel:!1,element:o})},s.prototype.calcPopupWidth=function(){var e=t.formatUnit(this.popupWidth);if(e.indexOf("%")>-1){e=(this.componentWrapper.getBoundingClientRect().width*parseFloat(e)/100).toString()+"px"}return e},s.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},s.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},s.prototype.listOption=function(e,i){var s=!t.isNullOrUndefined(i.iconCss),n=i.properties;return this.listCurrentOptions=null!==i.text||null!==i.value?{fields:n,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t.extend(this.listCurrentOptions,this.listCurrentOptions,i,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:n}),this.listCurrentOptions},s.prototype.renderPopup=function(){var i=this;if(this.list||e.prototype.render.call(this),!this.popupObj){document.body.appendChild(this.popupWrapper);var s=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate){this.header=document.createElement("div"),t.addClass([this.header],"e-ddl-header");for(var o=t.compile(this.headerTemplate)({}),l=0;l<o.length;l++)this.header.appendChild(o[l]);"CheckBox"===this.mode&&this.showSelectAll?t.prepend([this.header],this.popupWrapper):t.append([this.header],this.popupWrapper),t.EventHandler.add(this.header,"mousedown",this.onListMouseDown,this),s-=this.header.getBoundingClientRect().height}if(t.append([this.list],this.popupWrapper),this.footerTemplate){this.footer=document.createElement("div"),t.addClass([this.footer],"e-ddl-footer");for(o=t.compile(this.footerTemplate)({}),l=0;l<o.length;l++)this.footer.appendChild(o[l]);t.append([this.footer],this.popupWrapper),t.EventHandler.add(this.footer,"mousedown",this.onListMouseDown,this),s-=this.footer.getBoundingClientRect().height}if("CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),s-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),s=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.notify("searchBox",r),s-=this.searchBoxHeight,t.addClass([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=t.formatUnit(s),this.popupWrapper.style.maxHeight=t.formatUnit(this.popupHeight)):this.list.style.maxHeight=t.formatUnit(this.popupHeight),this.popupObj=new n.Popup(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){i.popupObj.element.parentElement&&t.detach(i.popupObj.element)},open:function(){i.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode,value:"focus"})}}),this.popupObj.close(),this.popupWrapper.style.visibility="","CheckBox"===this.mode&&t.Browser.isDevice&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode})}},s.prototype.ClearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0,i=this.value?this.value.slice():[];for(t=this.value[0];0!==this.value.length;t=this.value[0])this.removeValue(t,e);this.updateDelimeter(this.delimiterChar),"Box"!==this.mode&&this.updateDelimView(),this.makeTextBoxEmpty(),this.isPopupOpen()&&this.refreshPopup(),this.removeFocus(),this.inputFocus||(this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight()),e.preventDefault()}},s.prototype.windowResize=function(){this.refreshPopup(),!this.inputFocus&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},s.prototype.wireEvent=function(){t.EventHandler.add(this.componentWrapper,"mousedown",this.wrapperClick,this),t.EventHandler.add(window,"resize",this.windowResize,this),t.EventHandler.add(this.inputElement,"focus",this.focusIn,this),t.EventHandler.add(this.inputElement,"keydown",this.onKeyDown,this),t.EventHandler.add(this.inputElement,"keyup",this.KeyUp,this),t.EventHandler.add(this.inputElement,"input",this.onInput,this),t.EventHandler.add(this.inputElement,"blur",this.onBlur,this),t.EventHandler.add(this.componentWrapper,"mousemove",this.mouseIn,this),t.EventHandler.add(this.componentWrapper,"mouseout",this.mouseOut,this),t.EventHandler.add(this.overAllClear,"mouseup",this.ClearAll,this)},s.prototype.onInput=function(){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1},s.prototype.preRender=function(){this.initializeData(),e.prototype.preRender.call(this)},s.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1},s.prototype.updateData=function(e){var i,s="",n="Delimiter"===this.mode||"CheckBox"===this.mode,o=[],l=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!t.isNullOrUndefined(this.value))for(var r=0;this.value[r];r++)s+=(i=this.listData?this.getTextByValue(this.value[r]):this.value[r])+e+" ",o.push(i),this.hiddenElement.innerHTML+="<option selected value ="+this.value[r]+">"+r+"</option>";this.text=o.toString(),n&&(this.delimiterWrapper.innerHTML=s),this.listData=l},s.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,i=void 0,s=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!t.isNullOrUndefined(this.value))for(var n=0;this.value[n];n++)if(s=this.value[n],i=this.hideSelectedItem?this.ulElement.querySelector('li[data-value="'+s+'"]'):this.list.querySelector('li[data-value="'+s+'"]'),e=this.getTextByValue(s),i&&"true"!==i.getAttribute("aria-selected")||i&&"true"===i.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))e=this.getTextByValue(s),this.addChip(e,s),this.addListSelection(i);else if(s&&this.allowCustomValue){var o=this.listData.length,l={};t.setValue(this.fields.text,s,l),t.setValue(this.fields.value,s,l),this.addItem(l,o),e=this.getTextByValue(s),this.addChip(e,s),this.addListSelection(i)}"CheckBox"===this.mode?(this.updateDelimView(),this.updateValueState(null,this.value,this.tempValues),this.refreshInputHight(),this.updateDelimeter(this.delimiterChar)):this.updateDelimeter(this.delimiterChar),"CheckBox"===this.mode&&this.showSelectAll&&t.isNullOrUndefined(this.value)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),this.inputFocus||("Box"===this.mode?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper())}},s.prototype.isValidLI=function(e){return e&&!e.classList.contains(b.disabled)&&!e.classList.contains(b.group)&&e.classList.contains(b.li)},s.prototype.updateListSelection=function(e,i){var s=this.getFormattedValue(e.getAttribute("data-value")),n=this.getTextByValue(s);if(this.removeHover(),this.value&&-1!==this.value.indexOf(s))this.removeValue(s,i);else{if(this.dispatchSelect(s,i,e,"true"===e.getAttribute("aria-selected")))return;if((this.allowCustomValue||this.allowFiltering)&&!this.mainList.querySelector('li[data-value="'+s+'"]')){var o=e.cloneNode(!0),l=this.getDataByValue(s);t.append([o],this.mainList),this.mainData.push(this.getDataByValue(s));var r={newData:l,cancel:!1};if(this.trigger("customValueSelection",r),r.cancel)return}this.remoteCustomValue=!1,this.addValue(s,n,i)}},s.prototype.removeListSelection=function(){var e=this.hideSelectedItem?j:b.selected,i=this.list.querySelectorAll("."+e),s=i.length;if(i&&i.length)for(t.removeClass(i,e);s>0;)i[s-1].setAttribute("aria-selected","false"),s--;if(!t.isNullOrUndefined(this.mainList)){var n=this.mainList.querySelectorAll("."+e),o=n.length;if(n&&n.length)for(t.removeClass(n,e);o>0;)n[o-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(n[o-1].firstElementChild.setAttribute("aria-checked","false"),t.removeClass([n[o-1].firstElementChild.lastElementChild],"e-check")),o--}},s.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+b.hover);e&&e.length&&t.removeClass(e,b.hover)},s.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+b.focus),i=this.mainList.querySelectorAll("."+b.focus);e&&e.length&&(t.removeClass(e,b.focus),t.removeClass(i,b.focus))},s.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)&&(this.removeHover(),t.addClass([e],b.hover))},s.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)&&(this.removeFocus(),t.addClass([e],b.focus))},s.prototype.addListSelection=function(e){var i=this.hideSelectedItem?j:b.selected;if(this.isValidLI(e)&&!e.classList.contains(b.hover)){if(t.addClass([e],i),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var s=e.firstElementChild.getAttribute("aria-checked");("false"===s||t.isNullOrUndefined(s))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),null!==this.chipCollectionWrapper&&this.removeChipSelection(),t.attributes(this.inputElement,{"aria-activedescendant":e.id})}},s.prototype.updateDelimeter=function(e){this.updateData(e)},s.prototype.onMouseClick=function(e){this.scrollFocusStatus=!1;var i=e.target,s=t.closest(i,"."+b.li);if(this.isValidLI(s)){var n=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(n-=1),n<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?("CheckBox"!==this.mode&&this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.refreshInputHight(),this.updateDelimeter(this.delimiterChar)):this.updateDelimeter(this.delimiterChar),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty()}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(t.isNullOrUndefined(s)?null:s.textContent),this.refreshPlaceHolder()},s.prototype.onMouseOver=function(e){var i=t.closest(e.target,"."+b.li);this.addListHover(i)},s.prototype.onMouseLeave=function(e){this.removeHover()},s.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},s.prototype.wireListEvents=function(){t.EventHandler.add(this.list,"mousedown",this.onListMouseDown,this),t.EventHandler.add(this.list,"mouseup",this.onMouseClick,this),t.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),t.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},s.prototype.unwireListEvents=function(){this.list&&(t.EventHandler.remove(this.list,"mousedown",this.onListMouseDown),t.EventHandler.remove(this.list,"mouseup",this.onMouseClick),t.EventHandler.remove(this.list,"mouseover",this.onMouseOver),t.EventHandler.remove(this.list,"mouseout",this.onMouseLeave))},s.prototype.hideOverAllClear=function(){this.value&&this.value.length||(this.overAllClear.style.display="none")},s.prototype.showOverAllClear=function(){this.value&&this.value.length&&(this.overAllClear.style.display="")},s.prototype.showSpinner=function(){t.isNullOrUndefined(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=t.createElement("span",{className:z+" "+X}),this.componentWrapper.appendChild(this.spinnerElement)),t.addClass([this.spinnerElement],J),n.createSpinner({target:this.spinnerElement,width:t.Browser.isDevice?"16px":"14px"}),n.showSpinner(this.spinnerElement))},s.prototype.hideSpinner=function(){t.isNullOrUndefined(this.spinnerElement)||(n.hideSpinner(this.spinnerElement),t.removeClass([this.spinnerElement],J),this.spinnerElement.classList.contains(X)?t.detach(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},s.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.value&&this.value.length){var e="",i=void 0,s=void 0,n=1,o=void 0,l=void 0;this.viewWrapper.innerHTML="";var r=new t.L10n("dropdowns",{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed",overflowCountTemplate:"+${count} more.."},this.locale).getConstant("overflowCountTemplate"),a=t.createElement("span",{className:"e-remain"}),h=t.compile(r);a.appendChild(h({count:this.value.length})[0]),this.viewWrapper.appendChild(a);var p=a.getBoundingClientRect().width;t.remove(a),this.viewWrapper.innerHTML="";this.searchWrapper.getBoundingClientRect().width;var u=parseInt(window.getComputedStyle(this.componentWrapper).width,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),c=void 0;if(!t.isNullOrUndefined(this.value))for(var d=0;this.value[d];d++){if(e+=0===d?"":this.delimiterChar+" ",this.mainData&&this.mainData.length)if("CheckBox"===this.mode){c=110;var m=this.listData;this.listData=this.mainData,i=this.getTextByValue(this.value[d]),this.listData=m}else c=0,i=this.getTextByValue(this.value[d]);else i=this.value[d];if(e+=i,i=this.viewWrapper.innerHTML,this.viewWrapper.innerHTML=e,(o=this.viewWrapper.getBoundingClientRect().width)>u-c){void 0!==s&&(i=s,d=n+1),this.viewWrapper.innerHTML=i,l=this.value.length-d;break}o+p<=u?(s=e,n=d):0===d&&(s="",n=-1)}l>0&&(a.innerHTML="",a.appendChild(h({count:l})[0]),this.viewWrapper.appendChild(a))}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},s.prototype.unWireEvent=function(){t.EventHandler.remove(this.componentWrapper,"mousedown",this.wrapperClick),t.EventHandler.remove(window,"resize",this.windowResize),t.EventHandler.remove(this.inputElement,"focus",this.focusIn),t.EventHandler.remove(this.inputElement,"keydown",this.onKeyDown),t.EventHandler.remove(this.inputElement,"input",this.onInput),t.EventHandler.remove(this.inputElement,"keyup",this.KeyUp),t.EventHandler.remove(this.inputElement,"blur",this.onBlur),t.EventHandler.remove(this.componentWrapper,"mousemove",this.mouseIn),t.EventHandler.remove(this.componentWrapper,"mouseout",this.mouseOut),t.EventHandler.remove(this.overAllClear,"mousedown",this.ClearAll)},s.prototype.selectAllItem=function(e){var t,i=(t=this.list.querySelectorAll(e?'li[aria-selected="false"]:not(.e-reorder-hide)':'li[aria-selected="true"]:not(.e-reorder-hide)')).length;if(t&&t.length)for(;i>0;)this.updateListSelection(t[i-1],null),i--;"Box"===this.mode||this.isPopupOpen()?this.searchWrapper.classList.remove(K):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),this.refreshInputHight(),this.updateDelimeter(this.delimiterChar)):this.updateDelimeter(this.delimiterChar),this.refreshPlaceHolder()},s.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},s.prototype.updateDataSource=function(e){this.resetList(this.dataSource),this.value&&this.value.length&&this.refreshSelection()},s.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},s.prototype.getPersistData=function(){return this.addOnPersist(["value"])},s.prototype.onPropertyChanged=function(s,n){s.dataSource&&!t.isNullOrUndefined(Object.keys(s.dataSource))&&(this.mainList=null,this.mainData=null),this.setUpdateInitial(["query","dataSource"],s);for(var o=0,l=Object.keys(s);o<l.length;o++){var r=l[o];switch(r){case"query":case"dataSource":break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(s.showClearButton);break;case"value":this.list?this.inputFocus||(this.initialValueUpdate(),"Box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),this.updateValueState(null,this.value,n.value)):this.dataSource instanceof i.DataManager&&this.onLoadSelect();break;case"width":t.setStyleAttribute(this.overAllWrapper,{width:t.formatUnit(s.width)}),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(s.delimiterChar);break;case"cssClass":this.popupWrapper.classList.remove(n.cssClass),this.overAllWrapper.classList.remove(n.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(s.enableRtl),e.prototype.onPropertyChanged.call(this,s,n);break;case"readonly":this.updateReadonly(s.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(s.enabled);break;case"showSelectAll":this.popupObj.destroy(),this.popupObj=null,this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType();break;case"enableSelectionOrder":break;default:var a=void 0;a=this.getPropObject(r,s,n),e.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},s.prototype.hidePopup=function(){if(this.isPopupOpen()){var e={popup:this.popupObj,cancel:!1};if(this.trigger("close",e),e.cancel)return;var i={name:"FadeOut",duration:100,delay:100};this.beforePopupOpen=!1,this.overAllWrapper.classList.remove("e-icon-anim"),this.popupObj.hide(new t.Animation(i)),t.attributes(this.inputElement,{"aria-expanded":"false"}),this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"clear"}),this.popupObj.hide(),t.removeClass([document.body,this.popupObj.element],"e-popup-full-page")}},s.prototype.showPopup=function(){if(!this.ulElement)return this.beforePopupOpen=!0,void e.prototype.render.call(this);var t=this.ulElement.querySelectorAll("li.e-list-item").length,i=this.ulElement.querySelectorAll("li."+j).length;t>0&&t===i?this.beforePopupOpen=!1:this.onPopupShown()},s.prototype.selectAll=function(i){var s=this;if(t.isNullOrUndefined(this.list))this.selectAllAction=function(){if("CheckBox"===s.mode&&s.showSelectAll){var e={module:"CheckBoxSelection",enable:"CheckBox"===s.mode,value:i?"check":"uncheck"};s.notify("checkSelectAll",e)}s.selectAllItem(i),s.selectAllAction=null},e.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var n={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:i?"check":"uncheck"};this.notify("checkSelectAll",n)}this.selectAllItem(i)}},s.prototype.getModuleName=function(){return"multiselect"},s.prototype.render=function(){var s=this;this.initStatus=!1,this.setDynValue=!1,this.searchWrapper=t.createElement("span",{className:"e-searcher"}),this.viewWrapper=t.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=t.createElement("span",{className:z,styles:"display:none;"}),this.componentWrapper=t.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=t.createElement("div",{className:"e-multiselect e-input-group"}),"CheckBox"===this.mode&&t.addClass([this.overAllWrapper],"e-checkbox"),t.Browser.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.overAllWrapper.style.width=t.formatUnit(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=t.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=t.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=t.createElement("span",{className:"e-chips-collection",styles:"display:none"}),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!t.Browser.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(Q),this.dropDownIcon(),this.inputElement=t.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex"));var n=this.element.getAttribute("name")?this.element.getAttribute("name"):this.element.getAttribute("id"),o=this.element.getAttribute("id")?this.element.getAttribute("id"):t.getUniqueID("ej2_dropdownlist");this.element.id=o,"Never"!==this.floatLabelType?p(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.element.style.opacity="",this.hiddenElement=t.createElement("select",{attrs:{name:n,"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:"true"}}),this.element.removeAttribute("name"),this.componentWrapper.appendChild(this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.dataSource instanceof i.DataManager||this.renderPopup(),this.value&&this.value.length?this.dataSource instanceof i.DataManager?(this.setInitialValue=function(){s.initialValueUpdate(),s.initialUpdate(),s.setInitialValue=null},e.prototype.render.call(this)):(this.initialValueUpdate(),this.initialUpdate()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus()},s.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.focusIn()},s.prototype.setFloatLabelType=function(){!function(e,i,s,n,o,l,r){var a,h=i.querySelector("."+F),p=i.querySelector("."+T);t.isNullOrUndefined(h)?u(o,n,a=null!==r?r:""):(a=h.innerText,t.detach(s.querySelector("."+F)),u(o,n,a),t.isNullOrUndefined(p)||t.detach(s.querySelector("."+T))),e.classList.remove("e-float-input")}(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),"Never"!==this.floatLabelType&&p(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},s.prototype.dropDownIcon=function(){"CheckBox"===this.mode&&this.showDropDownIcon?(this.dropIcon=t.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),t.addClass([this.componentWrapper],["e-down-icon"])):t.isNullOrUndefined(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),t.removeClass([this.componentWrapper],["e-down-icon"]))},s.prototype.initialUpdate=function(){"Box"!==this.mode&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight()},s.prototype.destroy=function(){this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,e.prototype.destroy.call(this);for(var i=["readonly","aria-disabled","aria-placeholder","placeholder"],s=i.length;s>0;)this.inputElement.removeAttribute(i[s-1]),s--;this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?t.remove(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),t.remove(this.overAllWrapper)))},V([t.Property(null)],s.prototype,"cssClass",void 0),V([t.Property("100%")],s.prototype,"width",void 0),V([t.Property("300px")],s.prototype,"popupHeight",void 0),V([t.Property("100%")],s.prototype,"popupWidth",void 0),V([t.Property(null)],s.prototype,"placeholder",void 0),V([t.Property(null)],s.prototype,"filterBarPlaceholder",void 0),V([t.Property({})],s.prototype,"htmlAttributes",void 0),V([t.Property(null)],s.prototype,"valueTemplate",void 0),V([t.Property(null)],s.prototype,"headerTemplate",void 0),V([t.Property(null)],s.prototype,"footerTemplate",void 0),V([t.Property(null)],s.prototype,"itemTemplate",void 0),V([t.Property(!1)],s.prototype,"allowFiltering",void 0),V([t.Property(!1)],s.prototype,"allowCustomValue",void 0),V([t.Property(!0)],s.prototype,"showClearButton",void 0),V([t.Property(1e3)],s.prototype,"maximumSelectionLength",void 0),V([t.Property(!1)],s.prototype,"readonly",void 0),V([t.Property(null)],s.prototype,"text",void 0),V([t.Property(null)],s.prototype,"value",void 0),V([t.Property(!0)],s.prototype,"hideSelectedItem",void 0),V([t.Property(!0)],s.prototype,"closePopupOnSelect",void 0),V([t.Property("Default")],s.prototype,"mode",void 0),V([t.Property(",")],s.prototype,"delimiterChar",void 0),V([t.Property(!0)],s.prototype,"ignoreCase",void 0),V([t.Property(!1)],s.prototype,"showDropDownIcon",void 0),V([t.Property("Never")],s.prototype,"floatLabelType",void 0),V([t.Property(!1)],s.prototype,"showSelectAll",void 0),V([t.Property("Select All")],s.prototype,"selectAllText",void 0),V([t.Property("Unselect All")],s.prototype,"unSelectAllText",void 0),V([t.Property(!0)],s.prototype,"enableSelectionOrder",void 0),V([t.Property(!0)],s.prototype,"openOnClick",void 0),V([t.Event()],s.prototype,"change",void 0),V([t.Event()],s.prototype,"removing",void 0),V([t.Event()],s.prototype,"removed",void 0),V([t.Event()],s.prototype,"open",void 0),V([t.Event()],s.prototype,"close",void 0),V([t.Event()],s.prototype,"blur",void 0),V([t.Event()],s.prototype,"focus",void 0),V([t.Event()],s.prototype,"chipSelection",void 0),V([t.Event()],s.prototype,"filtering",void 0),V([t.Event()],s.prototype,"tagging",void 0),V([t.Event()],s.prototype,"customValueSelection",void 0),s=V([t.NotifyPropertyChanges],s)}(C),$="e-frame",Z="e-check",G="e-checkbox-wrapper",ee="e-input-group-icon e-clear-icon e-icons",te="e-clear-icon",ie="e-popup-full-page",se=function(){function e(e){this.activeLi=[],this.activeEle=[],this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"CheckBoxSelection"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlur,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),t.EventHandler.add(document,"mousedown",this.onDocumentClick,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlur),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),t.EventHandler.remove(document,"mousedown",this.onDocumentClick))},e.prototype.listOption=function(e){var i=this;if(t.isNullOrUndefined(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(e){i.checboxCreate(e)};else{var s=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(e){i.checboxCreate(e),s.apply(i,[e])}}},e.prototype.checboxCreate=function(e){var i;if("e-list-group-item "!==(i=t.isNullOrUndefined(e.item)?e:e.item).className&&"e-list-group-item"!==i.className){var s=l.createCheckBox(!0),n=t.select("div.e-icons",i);i.getAttribute("data-uid");i.insertBefore(s,i.childNodes[t.isNullOrUndefined(n)?0:1]),t.select("."+$,s);t.select("."+$,s);return i}return i},e.prototype.setSelectAll=function(){this.parent.showSelectAll?(t.isNullOrUndefined(this.checkAllParent)&&(this.checkAllParent=t.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=t.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(t.isNullOrUndefined(this.filterParent)?t.append([this.checkAllParent],this.parent.popupWrapper):t.append([this.checkAllParent],this.filterParent)),this.parent.headerTemplate||(t.isNullOrUndefined(this.filterParent)?t.prepend([this.checkAllParent],this.parent.popupWrapper):t.append([this.checkAllParent],this.filterParent)),t.EventHandler.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):t.isNullOrUndefined(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.listSelection=function(e){var i;if(i=t.isNullOrUndefined(e.e)?e.li.lastElementChild.childNodes[1]:t.isNullOrUndefined(e.e.target)?e.li.querySelector(".e-checkbox-wrapper").childNodes[1]:e.e.target.classList.contains("e-frame")?e.e.target:e.li.querySelector(".e-checkbox-wrapper").childNodes[1],this.parent.itemTemplate&&(i=e.li.firstElementChild.childNodes[1]),this.checkWrapper=t.closest(i,"."+G),!t.isNullOrUndefined(this.checkWrapper)){var s=t.select("."+$,this.checkWrapper);this.validateCheckNode(this.checkWrapper,s.classList.contains(Z),e.li,e.e,!1)}},e.prototype.validateCheckNode=function(e,t,i,s,n){this.changeState(e,t?"uncheck":"check",s,!0,n)},e.prototype.clickHandler=function(e){var i;i=e.currentTarget.classList.contains(this.checkAllParent.className)?e.currentTarget.firstElementChild.lastElementChild:e.currentTarget,this.checkWrapper=t.closest(i,"."+G);if(!t.isNullOrUndefined(this.checkWrapper)){var s=t.select("."+$,this.checkWrapper);this.validateCheckNode(this.checkWrapper,s.classList.contains(Z),null,e,!0)}e.preventDefault()},e.prototype.changeState=function(e,i,s,n,o){var l,r=e.getElementsByClassName($)[0];"check"!==i||r.classList.contains(Z)?"uncheck"===i&&(r.classList.contains(Z)||r.classList.contains("e-stop"))&&(t.removeClass([r],[Z,"e-stop"]),l="false",o&&(this.parent.selectAll(!1),this.setLocale())):(r.classList.remove("e-stop"),r.classList.add(Z),l="true",o&&(this.parent.selectAll(!0),this.setLocale(!0))),l="check"===i?"true":"uncheck"===i?"false":l,t.isNullOrUndefined(l)||e.setAttribute("aria-checked",l)},e.prototype.setSearchBox=function(e){if(t.isNullOrUndefined(this.filterParent)){this.filterParent=t.createElement("span",{className:"e-filter-parent"}),this.filterInput=t.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var i=!1;return t.Browser.isDevice&&(i=!0,this.parent.mobFilter=!1),this.filterInputObj=o.Input.createInput({element:this.filterInput,buttons:i?["e-input-group-icon e-back-icon e-icons",ee]:[ee],properties:{placeholder:this.parent.filterBarPlaceholder}}),t.append([this.filterInputObj.container],this.filterParent),t.prepend([this.filterParent],e.popupElement),t.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.parent.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+te),!t.Browser.isDevice&&this.clearIconElement&&(t.EventHandler.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),t.EventHandler.add(this.filterInput,"input",this.parent.onInput,this.parent),t.EventHandler.add(this.filterInput,"keyup",this.parent.KeyUp,this.parent),t.EventHandler.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),t.EventHandler.add(this.filterInput,"blur",this.onBlur,this),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},e.prototype.clickOnBackIcon=function(e){this.parent.hidePopup(),t.removeClass([document.body,this.parent.popupObj.element],ie)},e.prototype.clearText=function(e){this.parent.targetInputElement.value="",this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(e),e.preventDefault()},e.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),t.attributes(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),t.addClass([document.body,this.parent.popupObj.element],ie),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector("."+te),this.clearIconElement.style.visibility="hidden",t.EventHandler.add(this.backIconElement,"click",this.clickOnBackIcon,this),t.EventHandler.add(this.clearIconElement,"click",this.clearText,this)},e.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-e+"px",this.parent.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+te);t.detach(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.targetElement=function(){return this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible",this.parent.targetInputElement.value},e.prototype.onBlur=function(e){var i;if(t.Browser.isIE&&(i=!t.isNullOrUndefined(e)&&e.target),t.Browser.isIE||(i=!t.isNullOrUndefined(e)&&e.relatedTarget),document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(i)&&!t.Browser.isIE)this.filterInput.focus();else{if(this.parent.scrollFocusStatus)return e.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(e,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.trigger("blur"),this.parent.focused=!0),!document.body.contains(this.parent.popupObj.element)||this.parent.popupObj.element.classList.contains("e-popup-close")||t.Browser.isDevice||this.parent.hidePopup()}},e.prototype.onDocumentClick=function(e){var i=e.target;!t.isNullOrUndefined(this.parent.popupObj)&&t.closest(i,"#"+this.parent.popupObj.element.id)||this.parent.overAllWrapper.contains(e.target)||(this.parent.overAllWrapper.classList.contains(b.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.hidePopup(),this.parent.onBlur(),this.parent.focused=!0)},e.prototype.getFocus=function(e){this.parent.overAllWrapper.classList.remove("e-input-focus"),"focus"===e.value&&this.filterInput.focus(),"clear"===e.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},e.prototype.checkSelectAll=function(e){"check"===e.value&&"true"!==this.checkAllParent.getAttribute("aria-checked")&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale(!0)),"uncheck"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale())},e.prototype.setLocale=function(e){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var i=e?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var s=0,n=t.compile(i)({});s<n.length;s++){var o=n[s];this.selectAllSpan.textContent=o.textContent}}else{var l=new t.L10n("dropdowns",{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.parent.locale);this.selectAllSpan.textContent=e?l.getConstant("unSelectAllText"):l.getConstant("selectAllText")}},e.prototype.getActiveList=function(e){e.li.classList.contains("e-active")?this.activeLi.push(e.li.cloneNode(!0)):this.activeLi.splice(e.index,1)},e.prototype.setReorder=function(e){if(this.parent.enableSelectionOrder&&!t.isNullOrUndefined(this.parent.value)){var i=this.parent.ulElement.querySelectorAll("li.e-active").length,s=void 0,n=t.createElement("ul",{className:"e-list-parent e-ul e-reorder"});t.createElement("div");i>0&&(t.append(this.parent.ulElement.querySelectorAll("li.e-active"),n),s=this.parent.ulElement.querySelectorAll("li.e-active"),t.addClass(s,"e-reorder-hide"),t.prepend([n],this.parent.list)),this.parent.focusAtFirstListItem()}},e}();e.incrementalSearch=r,e.Search=a,e.highlightSearch=h,e.FieldSettings=g,e.dropDownBaseClasses=b,e.DropDownBase=C,e.dropDownListClasses=x,e.DropDownList=w,e.ComboBox=L,e.AutoComplete=N,e.MultiSelect=Y,e.CheckBoxSelection=se,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-dropdowns.umd.min.js.map
